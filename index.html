<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LEORA Premium - –ü—Ä–æ—Ç–æ—Ç–∏–ø</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f5f5f5;
            color: #333;
            max-width: 400px;
            margin: 0 auto;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        .app-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: white;
            overflow: hidden;
        }
        
        .header {
            background: #4a90e2;
            color: white;
            padding: 15px;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .content {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            padding-bottom: 80px;
        }
        
        .tab-bar {
            position: fixed;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            max-width: 400px;
            background: white;
            display: flex;
            justify-content: space-around;
            padding: 10px 0;
            border-top: 1px solid #e0e0e0;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
        }
        
        .tab {
            flex: 1;
            text-align: center;
            padding: 8px;
            cursor: pointer;
            font-size: 12px;
            color: #666;
            transition: all 0.3s;
        }
        
        .tab.active {
            color: #4a90e2;
            font-weight: bold;
        }
        
        .tab-icon {
            font-size: 20px;
            margin-bottom: 2px;
        }
        
        /* KPI Rings */
        .kpi-container {
            display: flex;
            justify-content: space-around;
            margin-bottom: 25px;
        }
        
        .kpi-ring {
            text-align: center;
            cursor: pointer;
        }
        
        .ring-svg {
            width: 80px;
            height: 80px;
        }
        
        .ring-label {
            margin-top: 5px;
            font-size: 12px;
            color: #666;
        }
        
        .ring-value {
            font-size: 14px;
            font-weight: bold;
            color: #333;
        }
        
        /* AI Cards */
        .ai-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            border-radius: 12px;
            margin-bottom: 15px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        .ai-card h3 {
            font-size: 16px;
            margin-bottom: 8px;
        }
        
        .ai-card p {
            font-size: 14px;
            margin-bottom: 12px;
            opacity: 0.95;
        }
        
        .ai-actions {
            display: flex;
            gap: 10px;
        }
        
        .ai-action {
            background: rgba(255,255,255,0.2);
            border: 1px solid rgba(255,255,255,0.3);
            color: white;
            padding: 6px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
            transition: background 0.3s;
        }
        
        .ai-action:hover {
            background: rgba(255,255,255,0.3);
        }
        
        /* Tasks */
        .task-item {
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .task-item:hover {
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .task-checkbox {
            width: 20px;
            height: 20px;
            border: 2px solid #4a90e2;
            border-radius: 4px;
            margin-right: 12px;
            cursor: pointer;
        }
        
        .task-checkbox.checked {
            background: #4a90e2;
        }
        
        .task-content {
            flex: 1;
        }
        
        .task-title {
            font-size: 14px;
            color: #333;
            margin-bottom: 4px;
        }
        
        .task-meta {
            font-size: 12px;
            color: #666;
        }
        
        /* Transactions */
        .transaction-item {
            background: white;
            border-left: 3px solid #ff6b6b;
            padding: 12px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            border-radius: 4px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        .transaction-item.income {
            border-left-color: #51cf66;
        }
        
        .transaction-info {
            flex: 1;
        }
        
        .transaction-category {
            font-size: 12px;
            color: #666;
            margin-bottom: 2px;
        }
        
        .transaction-description {
            font-size: 14px;
            color: #333;
        }
        
        .transaction-amount {
            font-size: 16px;
            font-weight: bold;
            color: #ff6b6b;
        }
        
        .transaction-item.income .transaction-amount {
            color: #51cf66;
        }
        
        /* Habits */
        .habit-item {
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .habit-info {
            flex: 1;
        }
        
        .habit-name {
            font-size: 14px;
            color: #333;
            margin-bottom: 4px;
        }
        
        .habit-streak {
            font-size: 12px;
            color: #4a90e2;
        }
        
        .habit-check {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            border: 2px solid #4a90e2;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }
        
        .habit-check.done {
            background: #4a90e2;
            color: white;
        }
        
        /* Focus Timer */
        .focus-timer {
            text-align: center;
            padding: 30px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 12px;
            color: white;
            margin-bottom: 20px;
        }
        
        .timer-display {
            font-size: 48px;
            font-weight: bold;
            margin: 20px 0;
        }
        
        .timer-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }
        
        .timer-btn {
            background: rgba(255,255,255,0.2);
            border: 1px solid rgba(255,255,255,0.3);
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: background 0.3s;
        }
        
        .timer-btn:hover {
            background: rgba(255,255,255,0.3);
        }
        
        /* Insights */
        .insight-card {
            background: white;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            border-left: 4px solid #4a90e2;
        }
        
        .insight-title {
            font-size: 16px;
            font-weight: bold;
            color: #333;
            margin-bottom: 8px;
        }
        
        .insight-content {
            font-size: 14px;
            color: #666;
            margin-bottom: 12px;
        }
        
        .insight-actions {
            display: flex;
            gap: 10px;
        }
        
        .insight-action {
            padding: 6px 12px;
            border: 1px solid #4a90e2;
            color: #4a90e2;
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
            transition: all 0.3s;
        }
        
        .insight-action:hover {
            background: #4a90e2;
            color: white;
        }
        
        /* Settings */
        .settings-section {
            margin-bottom: 25px;
        }
        
        .settings-title {
            font-size: 18px;
            font-weight: bold;
            color: #333;
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 2px solid #4a90e2;
        }
        
        .setting-item {
            background: white;
            padding: 12px;
            margin-bottom: 8px;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            border: 1px solid #e0e0e0;
            transition: all 0.3s;
        }
        
        .setting-item:hover {
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .setting-label {
            font-size: 14px;
            color: #333;
        }
        
        .setting-value {
            font-size: 13px;
            color: #666;
        }
        
        /* FAB */
        .fab {
            position: fixed;
            bottom: 80px;
            right: 20px;
            width: 56px;
            height: 56px;
            border-radius: 50%;
            background: #4a90e2;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(74, 144, 226, 0.4);
            font-size: 24px;
            transition: all 0.3s;
            z-index: 100;
        }
        
        .fab:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 16px rgba(74, 144, 226, 0.5);
        }
        
        .fab-menu {
            position: fixed;
            bottom: 150px;
            right: 20px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.2);
            padding: 8px 0;
            display: none;
            z-index: 99;
        }
        
        .fab-menu.open {
            display: block;
        }
        
        .fab-option {
            padding: 10px 16px;
            cursor: pointer;
            font-size: 14px;
            color: #333;
            transition: background 0.3s;
        }
        
        .fab-option:hover {
            background: #f5f5f5;
        }
        
        /* Sub-tabs */
        .sub-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            overflow-x: auto;
        }
        
        .sub-tab {
            padding: 8px 16px;
            background: #f0f0f0;
            border-radius: 20px;
            cursor: pointer;
            font-size: 13px;
            white-space: nowrap;
            transition: all 0.3s;
        }
        
        .sub-tab.active {
            background: #4a90e2;
            color: white;
        }
        
        /* Budget bars */
        .budget-item {
            background: white;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 12px;
            border: 1px solid #e0e0e0;
        }
        
        .budget-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
        }
        
        .budget-name {
            font-size: 14px;
            font-weight: bold;
            color: #333;
        }
        
        .budget-amount {
            font-size: 13px;
            color: #666;
        }
        
        .budget-progress {
            height: 8px;
            background: #e0e0e0;
            border-radius: 4px;
            overflow: hidden;
        }
        
        .budget-fill {
            height: 100%;
            background: #4a90e2;
            transition: width 0.3s;
        }
        
        .budget-fill.warning {
            background: #ffa500;
        }
        
        .budget-fill.danger {
            background: #ff6b6b;
        }
        
        /* Empty state */
        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: #999;
        }
        
        .empty-icon {
            font-size: 48px;
            margin-bottom: 12px;
        }
        
        .empty-text {
            font-size: 14px;
        }
        
        /* Modal */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        
        .modal.open {
            display: flex;
        }
        
        .modal-content {
            background: white;
            padding: 20px;
            border-radius: 12px;
            width: 90%;
            max-width: 350px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }
        
        .modal-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-label {
            display: block;
            font-size: 13px;
            color: #666;
            margin-bottom: 5px;
        }
        
        .form-input {
            width: 100%;
            padding: 8px;
            border: 1px solid #e0e0e0;
            border-radius: 6px;
            font-size: 14px;
        }
        
        .form-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        
        .btn {
            flex: 1;
            padding: 10px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }
        
        .btn-primary {
            background: #4a90e2;
            color: white;
        }
        
        .btn-secondary {
            background: #f0f0f0;
            color: #333;
        }
        
        .btn:hover {
            opacity: 0.9;
        }
    </style>
</head>
<body>
    <div class="app-container">
        <div class="header">
            <h1 id="headerTitle">LEORA Premium</h1>
        </div>
        
        <div class="content" id="content">
            <!-- Content will be dynamically loaded here -->
        </div>
        
        <div class="tab-bar">
            <div class="tab active" onclick="switchTab('home')">
                <div class="tab-icon">üè†</div>
                <div>HOME</div>
            </div>
            <div class="tab" onclick="switchTab('finance')">
                <div class="tab-icon">üí∞</div>
                <div>FINANCE</div>
            </div>
            <div class="tab" onclick="switchTab('planner')">
                <div class="tab-icon">üìã</div>
                <div>PLANNER</div>
            </div>
            <div class="tab" onclick="switchTab('insights')">
                <div class="tab-icon">üí°</div>
                <div>INSIGHTS</div>
            </div>
            <div class="tab" onclick="switchTab('more')">
                <div class="tab-icon">‚öôÔ∏è</div>
                <div>MORE</div>
            </div>
        </div>
        
        <!-- FAB -->
        <div class="fab" id="fab" onclick="toggleFab()">+</div>
        <div class="fab-menu" id="fabMenu">
            <!-- Menu content will be dynamically loaded based on current tab -->
        </div>
        
        <!-- Modal -->
        <div class="modal" id="modal">
            <div class="modal-content">
                <h3 class="modal-title" id="modalTitle">–ù–æ–≤–∞—è –∑–∞–¥–∞—á–∞</h3>
                <div id="modalBody">
                    <!-- Modal content will be loaded here -->
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // State management
        let currentTab = 'home';
        let currentSubTab = 'transactions';
        let focusTimer = null;
        let focusSeconds = 1500; // 25 minutes
        let isFocusRunning = false;
        
        // Sample data
        const tasks = [
            { id: 1, title: '–ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—é', time: '10:00', project: '–†–∞–±–æ—Ç–∞', priority: 'high', done: false },
            { id: 2, title: '–ü–æ–∑–≤–æ–Ω–∏—Ç—å –∫–ª–∏–µ–Ω—Ç—É', time: '11:30', project: '–ü—Ä–æ–¥–∞–∂–∏', priority: 'high', done: false },
            { id: 3, title: '–û–±–∑–æ—Ä –∫–æ–¥–∞ PR #234', time: '14:00', project: '–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞', priority: 'medium', done: false },
            { id: 4, title: '–ü–ª–∞–Ω–µ—Ä–∫–∞ –∫–æ–º–∞–Ω–¥—ã', time: '15:00', project: '–†–∞–±–æ—Ç–∞', priority: 'medium', done: true },
            { id: 5, title: '–ù–∞–ø–∏—Å–∞—Ç—å –æ—Ç—á–µ—Ç', time: '16:30', project: '–†–∞–±–æ—Ç–∞', priority: 'low', done: false }
        ];
        
        const transactions = [
            { id: 1, description: '–ü—Ä–æ–¥—É–∫—Ç—ã –ú–∞–≥–Ω–∏—Ç', amount: -1250, category: '–ü—Ä–æ–¥—É–∫—Ç—ã', type: 'expense' },
            { id: 2, description: '–ó–∞—Ä–ø–ª–∞—Ç–∞', amount: 95000, category: '–î–æ—Ö–æ–¥', type: 'income' },
            { id: 3, description: '–Ø–Ω–¥–µ–∫—Å.–¢–∞–∫—Å–∏', amount: -450, category: '–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç', type: 'expense' },
            { id: 4, description: '–û–±–µ–¥ –≤ –∫–∞—Ñ–µ', amount: -890, category: '–†–µ—Å—Ç–æ—Ä–∞–Ω—ã', type: 'expense' },
            { id: 5, description: 'Netflix –ø–æ–¥–ø–∏—Å–∫–∞', amount: -799, category: '–†–∞–∑–≤–ª–µ—á–µ–Ω–∏—è', type: 'expense' }
        ];
        
        const habits = [
            { id: 1, name: '–£—Ç—Ä–µ–Ω–Ω—è—è –º–µ–¥–∏—Ç–∞—Ü–∏—è', time: '–£—Ç—Ä–æ', streak: 12, done: true },
            { id: 2, name: '–ß—Ç–µ–Ω–∏–µ 30 –º–∏–Ω—É—Ç', time: '–í–µ—á–µ—Ä', streak: 5, done: false },
            { id: 3, name: '–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞', time: '–î–µ–Ω—å', streak: 8, done: false },
            { id: 4, name: '–ò–∑—É—á–µ–Ω–∏–µ –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ', time: '–î–µ–Ω—å', streak: 23, done: true },
            { id: 5, name: '–ë–µ–∑ —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–µ—Ç–µ–π', time: '–í–µ—Å—å –¥–µ–Ω—å', streak: 3, done: false }
        ];
        
        const insights = [
            { 
                id: 1, 
                title: '–ü–∏–∫ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –≤ 10:00-12:00',
                content: '–í—ã –≤—ã–ø–æ–ª–Ω—è–µ—Ç–µ 65% –≤–∞–∂–Ω—ã—Ö –∑–∞–¥–∞—á –≤ —ç—Ç–æ –≤—Ä–µ–º—è. –†–µ–∫–æ–º–µ–Ω–¥—É—é –ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å —Å–ª–æ–∂–Ω—ã–µ –∑–∞–¥–∞—á–∏ –Ω–∞ —ç—Ç–æ –æ–∫–Ω–æ.',
                type: 'productivity'
            },
            {
                id: 2,
                title: '–ü—è—Ç–Ω–∏—Ü—ã –¥–æ—Ä–æ–∂–µ –Ω–∞ 38%',
                content: '–°—Ä–µ–¥–Ω–∏–µ —Ç—Ä–∞—Ç—ã –≤ –ø—è—Ç–Ω–∏—Ü—É: 2,900‚ÇΩ vs –±—É–¥–Ω–∏: 2,100‚ÇΩ. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ª–∏–º–∏—Ç –Ω–∞ —Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏—è.',
                type: 'finance'
            },
            {
                id: 3,
                title: '–ö–æ—Ä—Ä–µ–ª—è—Ü–∏—è: —Ñ–æ–∫—É—Å –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞—á',
                content: '–í –¥–Ω–∏ —Å 2+ —Ñ–æ–∫—É—Å-—Å–µ—Å—Å–∏—è–º–∏ –≤—ã –≤—ã–ø–æ–ª–Ω—è–µ—Ç–µ –Ω–∞ 45% –±–æ–ª—å—à–µ –∑–∞–¥–∞—á.',
                type: 'correlation'
            }
        ];
        
        const budgets = [
            { name: '–ü—Ä–æ–¥—É–∫—Ç—ã', limit: 15000, spent: 8500 },
            { name: '–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç', limit: 5000, spent: 4200 },
            { name: '–†–∞–∑–≤–ª–µ—á–µ–Ω–∏—è', limit: 8000, spent: 7800 },
            { name: '–†–µ—Å—Ç–æ—Ä–∞–Ω—ã', limit: 10000, spent: 9500 }
        ];
        
        // Initialize app
        window.onload = function() {
            switchTab('home');
        };
        
        // Tab switching
        function switchTab(tab) {
            currentTab = tab;
            
            // Update tab bar
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            event.target.closest('.tab').classList.add('active');
            
            // Update header
            const titles = {
                home: 'HOME ¬∑ –ö–æ–º–∞–Ω–¥–Ω—ã–π —Ü–µ–Ω—Ç—Ä',
                finance: 'FINANCE ¬∑ –§–∏–Ω–∞–Ω—Å—ã',
                planner: 'PLANNER ¬∑ –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫',
                insights: 'INSIGHTS ¬∑ –ò–Ω—Å–∞–π—Ç—ã',
                more: 'MORE ¬∑ –ù–∞—Å—Ç—Ä–æ–π–∫–∏'
            };
            document.getElementById('headerTitle').textContent = titles[tab];
            
            // Update FAB visibility and menu
            const fab = document.getElementById('fab');
            const fabMenu = document.getElementById('fabMenu');
            
            if (['home', 'finance', 'planner'].includes(tab)) {
                fab.style.display = 'flex';
                
                // Update FAB menu based on current tab
                let menuContent = '';
                if (tab === 'home') {
                    menuContent = `
                        <div class="fab-option" onclick="showModal('task')">üìù –ë—ã—Å—Ç—Ä–∞—è –∑–∞–¥–∞—á–∞</div>
                        <div class="fab-option" onclick="showModal('expense')">üí∏ –ë—ã—Å—Ç—Ä—ã–π —Ä–∞—Å—Ö–æ–¥</div>
                        <div class="fab-option" onclick="startFocus()">üéØ –ù–∞—á–∞—Ç—å —Ñ–æ–∫—É—Å</div>
                        <div class="fab-option" onclick="showModal('voice')">üé§ –ì–æ–ª–æ—Å–æ–≤–æ–π –≤–≤–æ–¥</div>
                    `;
                } else if (tab === 'finance') {
                    menuContent = `
                        <div class="fab-option" onclick="showModal('expense')">üí∏ –†–∞—Å—Ö–æ–¥</div>
                        <div class="fab-option" onclick="showModal('income')">üíµ –î–æ—Ö–æ–¥</div>
                        <div class="fab-option" onclick="showModal('transfer')">‚ÜîÔ∏è –ü–µ—Ä–µ–≤–æ–¥</div>
                        <div class="fab-option" onclick="createDebt('they_owe')">üì• –î–æ–ª–≥ (–º–Ω–µ –¥–æ–ª–∂–Ω—ã)</div>
                        <div class="fab-option" onclick="createDebt('i_owe')">üì§ –î–æ–ª–≥ (—è –¥–æ–ª–∂–µ–Ω)</div>
                        <div class="fab-option" onclick="splitBill()">‚ûó –†–∞–∑–¥–µ–ª–∏—Ç—å —Å—á–µ—Ç</div>
                    `;
                } else if (tab === 'planner') {
                    menuContent = `
                        <div class="fab-option" onclick="showModal('task')">üìù –ù–æ–≤–∞—è –∑–∞–¥–∞—á–∞</div>
                        <div class="fab-option" onclick="startFocus()">üéØ –ë—ã—Å—Ç—Ä—ã–π —Ñ–æ–∫—É—Å</div>
                        <div class="fab-option" onclick="showModal('habit')">üîÑ –ù–æ–≤–∞—è –ø—Ä–∏–≤—ã—á–∫–∞</div>
                        <div class="fab-option" onclick="showModal('project')">üìÅ –ù–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç</div>
                    `;
                }
                fabMenu.innerHTML = menuContent;
            } else {
                fab.style.display = 'none';
            }
            
            // Load content
            loadContent(tab);
        }
        
        // Content loading
        function loadContent(tab) {
            const content = document.getElementById('content');
            
            switch(tab) {
                case 'home':
                    content.innerHTML = getHomeContent();
                    break;
                case 'finance':
                    content.innerHTML = getFinanceContent();
                    break;
                case 'planner':
                    content.innerHTML = getPlannerContent();
                    break;
                case 'insights':
                    content.innerHTML = getInsightsContent();
                    break;
                case 'more':
                    content.innerHTML = getMoreContent();
                    break;
            }
        }
        
        // HOME content
        function getHomeContent() {
            const tasksDone = tasks.filter(t => t.done).length;
            const tasksTotal = tasks.length;
            const focusMinutes = 45;
            const focusGoal = 120;
            const spentToday = 3389;
            const dailyLimit = 4000;
            
            return `
                <!-- KPI Rings -->
                <div class="kpi-container">
                    <div class="kpi-ring" onclick="alert('–ó–∞–¥–∞—á–∏ —Å–µ–≥–æ–¥–Ω—è: ${tasksDone}/${tasksTotal}')">
                        <svg class="ring-svg" viewBox="0 0 36 36">
                            <path d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"
                                fill="none" stroke="#e0e0e0" stroke-width="3"/>
                            <path d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"
                                fill="none" stroke="#4a90e2" stroke-width="3"
                                stroke-dasharray="${(tasksDone/tasksTotal)*100}, 100"/>
                        </svg>
                        <div class="ring-label">–ó–∞–¥–∞—á–∏</div>
                        <div class="ring-value">${tasksDone}/${tasksTotal}</div>
                    </div>
                    
                    <div class="kpi-ring" onclick="alert('–§–æ–∫—É—Å: ${focusMinutes}/${focusGoal} –º–∏–Ω')">
                        <svg class="ring-svg" viewBox="0 0 36 36">
                            <path d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"
                                fill="none" stroke="#e0e0e0" stroke-width="3"/>
                            <path d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"
                                fill="none" stroke="#9b59b6" stroke-width="3"
                                stroke-dasharray="${(focusMinutes/focusGoal)*100}, 100"/>
                        </svg>
                        <div class="ring-label">–§–æ–∫—É—Å</div>
                        <div class="ring-value">${focusMinutes} –º–∏–Ω</div>
                    </div>
                    
                    <div class="kpi-ring" onclick="alert('–ü–æ—Ç—Ä–∞—á–µ–Ω–æ: ${spentToday}‚ÇΩ –∏–∑ ${dailyLimit}‚ÇΩ')">
                        <svg class="ring-svg" viewBox="0 0 36 36">
                            <path d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"
                                fill="none" stroke="#e0e0e0" stroke-width="3"/>
                            <path d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"
                                fill="none" stroke="${spentToday/dailyLimit > 0.9 ? '#ff6b6b' : spentToday/dailyLimit > 0.6 ? '#ffa500' : '#51cf66'}" 
                                stroke-width="3"
                                stroke-dasharray="${(spentToday/dailyLimit)*100}, 100"/>
                        </svg>
                        <div class="ring-label">–§–∏–Ω–∞–Ω—Å—ã</div>
                        <div class="ring-value">${spentToday}‚ÇΩ</div>
                    </div>
                </div>
                
                <!-- AI Cards -->
                <div class="ai-card">
                    <h3>‚è∞ –í—Å—Ç—Ä–µ—á–∞ —á–µ—Ä–µ–∑ 45 –º–∏–Ω—É—Ç</h3>
                    <p>–ü–ª–∞–Ω–µ—Ä–∫–∞ –∫–æ–º–∞–Ω–¥—ã –≤ 15:00. –ü–æ–¥–≥–æ—Ç–æ–≤—å—Ç–µ –æ—Ç—á–µ—Ç –ø–æ —Å–ø—Ä–∏–Ω—Ç—É –∏ –≤–æ–ø—Ä–æ—Å—ã –¥–ª—è –æ–±—Å—É–∂–¥–µ–Ω–∏—è.</p>
                    <div class="ai-actions">
                        <div class="ai-action" onclick="alert('–ù–∞—á–∏–Ω–∞—é —Ñ–æ–∫—É—Å-—Å–µ—Å—Å–∏—é –Ω–∞ –ø–æ–¥–≥–æ—Ç–æ–≤–∫—É')">üéØ –ù–∞—á–∞—Ç—å –ø–æ–¥–≥–æ—Ç–æ–≤–∫—É</div>
                        <div class="ai-action" onclick="alert('–û—Ç–∫—Ä—ã–≤–∞—é –¥–µ—Ç–∞–ª–∏ –≤—Å—Ç—Ä–µ—á–∏')">üìã –î–µ—Ç–∞–ª–∏</div>
                    </div>
                </div>
                
                <div class="ai-card">
                    <h3>üí∞ –¢—Ä–∞—Ç—ã –≤—ã—à–µ —Å—Ä–µ–¥–Ω–µ–≥–æ</h3>
                    <p>–°–µ–≥–æ–¥–Ω—è –≤—ã –ø–æ—Ç—Ä–∞—Ç–∏–ª–∏ –Ω–∞ 23% –±–æ–ª—å—à–µ –æ–±—ã—á–Ω–æ–≥–æ. –û—Å–Ω–æ–≤–Ω–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è - —Ä–µ—Å—Ç–æ—Ä–∞–Ω—ã.</p>
                    <div class="ai-actions">
                        <div class="ai-action" onclick="alert('–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é –ª–∏–º–∏—Ç –Ω–∞ –≤–µ—á–µ—Ä')">üö´ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ª–∏–º–∏—Ç</div>
                        <div class="ai-action" onclick="alert('–ü–æ–∫–∞–∑—ã–≤–∞—é –¥–µ—Ç–∞–ª—å–Ω—É—é –∞–Ω–∞–ª–∏—Ç–∏–∫—É')">üìä –ê–Ω–∞–ª–∏–∑</div>
                    </div>
                </div>
                
                <!-- My Day Tasks -->
                <h3 style="margin: 20px 0 10px; font-size: 18px;">üìÖ –ú–æ–π –¥–µ–Ω—å</h3>
                ${tasks.filter(t => !t.done).slice(0, 3).map(task => `
                    <div class="task-item">
                        <div class="task-checkbox" onclick="toggleTask(${task.id})"></div>
                        <div class="task-content">
                            <div class="task-title">${task.title}</div>
                            <div class="task-meta">‚è∞ ${task.time} ¬∑ üìÅ ${task.project}</div>
                        </div>
                    </div>
                `).join('')}
                
                <!-- Motivational message -->
                <div style="text-align: center; padding: 20px; color: #666; font-size: 14px; margin-top: 20px;">
                    üí™ –û—Ç–ª–∏—á–Ω—ã–π —Ç–µ–º–ø! –í—ã –≤—ã–ø–æ–ª–Ω–∏–ª–∏ ${tasksDone} –∏–∑ ${tasksTotal} –∑–∞–¥–∞—á.<br>
                    –û—Å—Ç–∞–ª–æ—Å—å —Å–æ–≤—Å–µ–º –Ω–µ–º–Ω–æ–≥–æ –¥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –¥–Ω—è!
                </div>
            `;
        }
        
        // FINANCE content
        function getFinanceContent() {
            const totalBalance = 156780;
            const monthSpent = 67890;
            const monthBudget = 100000;
            
            return `
                <!-- Balance Card -->
                <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 12px; margin-bottom: 20px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                        <div>
                            <div style="font-size: 12px; opacity: 0.9;">–û–±—â–∏–π –±–∞–ª–∞–Ω—Å</div>
                            <div style="font-size: 28px; font-weight: bold;">${totalBalance.toLocaleString()}‚ÇΩ</div>
                        </div>
                        <button onclick="toggleAmountVisibility()" style="background: rgba(255,255,255,0.2); border: none; padding: 8px; border-radius: 8px; color: white; cursor: pointer;">
                            üëÅÔ∏è
                        </button>
                    </div>
                    <div style="display: flex; justify-content: space-between; padding-top: 10px; border-top: 1px solid rgba(255,255,255,0.2);">
                        <div>
                            <div style="font-size: 11px; opacity: 0.8;">–î–æ—Ö–æ–¥—ã –≤ –º–µ—Å—è—Ü</div>
                            <div style="font-size: 16px;">+95,000‚ÇΩ</div>
                        </div>
                        <div>
                            <div style="font-size: 11px; opacity: 0.8;">–†–∞—Å—Ö–æ–¥—ã –≤ –º–µ—Å—è—Ü</div>
                            <div style="font-size: 16px;">-${monthSpent.toLocaleString()}‚ÇΩ</div>
                        </div>
                        <div>
                            <div style="font-size: 11px; opacity: 0.8;">–≠–∫–æ–Ω–æ–º–∏—è</div>
                            <div style="font-size: 16px; color: #51cf66;">+27,110‚ÇΩ</div>
                        </div>
                    </div>
                </div>
                
                <!-- Quick Stats -->
                <div style="display: flex; gap: 10px; margin-bottom: 20px;">
                    <div style="flex: 1; background: #f0f8ff; padding: 12px; border-radius: 8px; text-align: center;">
                        <div style="font-size: 20px;">üìä</div>
                        <div style="font-size: 11px; color: #666;">–°–µ–≥–æ–¥–Ω—è</div>
                        <div style="font-size: 16px; font-weight: bold;">3,389‚ÇΩ</div>
                    </div>
                    <div style="flex: 1; background: #fff5f0; padding: 12px; border-radius: 8px; text-align: center;">
                        <div style="font-size: 20px;">üìà</div>
                        <div style="font-size: 11px; color: #666;">–ù–µ–¥–µ–ª—è</div>
                        <div style="font-size: 16px; font-weight: bold;">18,450‚ÇΩ</div>
                    </div>
                    <div style="flex: 1; background: #f0fff0; padding: 12px; border-radius: 8px; text-align: center;">
                        <div style="font-size: 20px;">üí∞</div>
                        <div style="font-size: 11px; color: #666;">–ú–µ—Å—è—Ü</div>
                        <div style="font-size: 16px; font-weight: bold;">${monthSpent.toLocaleString()}‚ÇΩ</div>
                    </div>
                </div>
                
                <!-- Sub-tabs -->
                <div class="sub-tabs">
                    <div class="sub-tab active" onclick="loadFinanceSubTab('transactions')">–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏</div>
                    <div class="sub-tab" onclick="loadFinanceSubTab('budgets')">–ë—é–¥–∂–µ—Ç—ã</div>
                    <div class="sub-tab" onclick="loadFinanceSubTab('goals')">–¶–µ–ª–∏</div>
                    <div class="sub-tab" onclick="loadFinanceSubTab('debts')">–î–æ–ª–≥–∏</div>
                    <div class="sub-tab" onclick="loadFinanceSubTab('analytics')">–ê–Ω–∞–ª–∏—Ç–∏–∫–∞</div>
                </div>
                
                <div id="financeSubContent">
                    ${getTransactionsContent()}
                </div>
            `;
        }
        
        function getTransactionsContent() {
            return `
                <!-- Search and Filters -->
                <div style="display: flex; gap: 10px; margin-bottom: 15px;">
                    <input type="search" placeholder="üîç –ü–æ–∏—Å–∫ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π..." style="flex: 1; padding: 10px; border: 1px solid #e0e0e0; border-radius: 8px;">
                    <button onclick="showTransactionFilters()" style="padding: 10px 15px; background: #f0f0f0; border: none; border-radius: 8px; cursor: pointer;">
                        üéØ –§–∏–ª—å—Ç—Ä—ã
                    </button>
                    <button onclick="exportTransactions()" style="padding: 10px 15px; background: #f0f0f0; border: none; border-radius: 8px; cursor: pointer;">
                        üì§ –≠–∫—Å–ø–æ—Ä—Ç
                    </button>
                </div>
                
                <!-- Category Filters -->
                <div style="display: flex; gap: 8px; margin-bottom: 15px; overflow-x: auto;">
                    <div class="sub-tab active" style="font-size: 12px; padding: 6px 12px;">–í—Å–µ</div>
                    <div class="sub-tab" style="font-size: 12px; padding: 6px 12px;">–ü—Ä–æ–¥—É–∫—Ç—ã</div>
                    <div class="sub-tab" style="font-size: 12px; padding: 6px 12px;">–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç</div>
                    <div class="sub-tab" style="font-size: 12px; padding: 6px 12px;">–†–µ—Å—Ç–æ—Ä–∞–Ω—ã</div>
                    <div class="sub-tab" style="font-size: 12px; padding: 6px 12px;">–†–∞–∑–≤–ª–µ—á–µ–Ω–∏—è</div>
                </div>
                
                <!-- Transactions by Date -->
                <div style="margin-bottom: 20px;">
                    <h4 style="margin-bottom: 10px; color: #666; font-size: 14px;">–°–µ–≥–æ–¥–Ω—è, 25 –∞–≤–≥—É—Å—Ç–∞</h4>
                    ${transactions.slice(0, 3).map(t => `
                        <div class="transaction-item ${t.type}" style="position: relative; overflow: hidden;">
                            <div style="position: absolute; left: -100px; top: 0; bottom: 0; width: 100px; background: #ff6b6b; display: flex; align-items: center; justify-content: center; color: white; font-size: 12px;">
                                üóëÔ∏è –£–¥–∞–ª–∏—Ç—å
                            </div>
                            <div style="position: absolute; right: -100px; top: 0; bottom: 0; width: 100px; background: #4a90e2; display: flex; align-items: center; justify-content: center; color: white; font-size: 12px;">
                                üìã –î—É–±–ª–∏—Ä–æ–≤–∞—Ç—å
                            </div>
                            <div style="background: white; position: relative; z-index: 1;" onclick="showTransactionDetails(${t.id})">
                                <div class="transaction-info">
                                    <div class="transaction-category">${t.category} ¬∑ 14:30</div>
                                    <div class="transaction-description">${t.description}</div>
                                    ${t.type === 'expense' ? '<div style="font-size: 11px; color: #999;">üí≥ –¢–∏–Ω—å–∫–æ—Ñ—Ñ Black</div>' : ''}
                                </div>
                                <div class="transaction-amount">${t.amount > 0 ? '+' : ''}${t.amount.toLocaleString()}‚ÇΩ</div>
                            </div>
                        </div>
                    `).join('')}
                    <div style="text-align: right; margin-top: 10px; font-size: 13px; color: #666;">
                        –ò—Ç–æ–≥–æ –∑–∞ –¥–µ–Ω—å: <strong style="color: #ff6b6b;">-2,590‚ÇΩ</strong>
                    </div>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <h4 style="margin-bottom: 10px; color: #666; font-size: 14px;">–í—á–µ—Ä–∞, 24 –∞–≤–≥—É—Å—Ç–∞</h4>
                    ${transactions.slice(3, 5).map(t => `
                        <div class="transaction-item ${t.type}" onclick="showTransactionDetails(${t.id})">
                            <div class="transaction-info">
                                <div class="transaction-category">${t.category} ¬∑ 19:45</div>
                                <div class="transaction-description">${t.description}</div>
                            </div>
                            <div class="transaction-amount">${t.amount > 0 ? '+' : ''}${t.amount.toLocaleString()}‚ÇΩ</div>
                        </div>
                    `).join('')}
                    <div style="text-align: right; margin-top: 10px; font-size: 13px; color: #666;">
                        –ò—Ç–æ–≥–æ –∑–∞ –¥–µ–Ω—å: <strong style="color: #ff6b6b;">-1,689‚ÇΩ</strong>
                    </div>
                </div>
                
                <!-- Recurring Transactions Notice -->
                <div style="background: #fff3cd; padding: 12px; border-radius: 8px; margin-top: 15px;">
                    <div style="font-size: 13px; font-weight: bold; margin-bottom: 5px;">‚ö° –ü–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è –ø–ª–∞—Ç–µ–∂–∏</div>
                    <div style="font-size: 12px;">–ó–∞–≤—Ç—Ä–∞: Netflix (799‚ÇΩ), Spotify (169‚ÇΩ)</div>
                </div>
            `;
        }
        
        function getBudgetsContent() {
            const totalMonthBudget = 100000;
            const totalSpent = 67890;
            const daysLeft = 6;
            
            return `
                <!-- Month Overview -->
                <div style="background: white; padding: 15px; border-radius: 8px; margin-bottom: 20px; border: 1px solid #e0e0e0;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 12px;">
                        <div>
                            <div style="font-size: 18px; font-weight: bold;">–ê–≤–≥—É—Å—Ç 2025</div>
                            <div style="font-size: 13px; color: #666;">–û–±—â–∏–π –±—é–¥–∂–µ—Ç</div>
                        </div>
                        <div style="text-align: right;">
                            <div style="font-size: 18px; font-weight: bold; color: ${totalSpent/totalMonthBudget > 0.9 ? '#ff6b6b' : '#4a90e2'}">
                                ${Math.round((totalSpent/totalMonthBudget)*100)}%
                            </div>
                            <div style="font-size: 13px; color: #666;">${daysLeft} –¥–Ω–µ–π –¥–æ –∫–æ–Ω—Ü–∞</div>
                        </div>
                    </div>
                    <div class="budget-progress" style="height: 12px;">
                        <div class="budget-fill ${totalSpent/totalMonthBudget > 0.9 ? 'danger' : totalSpent/totalMonthBudget > 0.6 ? 'warning' : ''}" 
                             style="width: ${(totalSpent/totalMonthBudget)*100}%"></div>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-top: 8px; font-size: 12px; color: #666;">
                        <span>–ü–æ—Ç—Ä–∞—á–µ–Ω–æ: ${totalSpent.toLocaleString()}‚ÇΩ</span>
                        <span>–û—Å—Ç–∞–ª–æ—Å—å: ${(totalMonthBudget - totalSpent).toLocaleString()}‚ÇΩ</span>
                    </div>
                </div>
                
                <!-- Category Budgets -->
                <h4 style="margin-bottom: 15px;">–ë—é–¥–∂–µ—Ç—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º</h4>
                ${budgets.map(b => {
                    const percent = (b.spent / b.limit) * 100;
                    const fillClass = percent > 90 ? 'danger' : percent > 60 ? 'warning' : '';
                    const dailyLimit = Math.round((b.limit - b.spent) / daysLeft);
                    
                    return `
                        <div class="budget-item" onclick="showBudgetDetails('${b.name}')">
                            <div class="budget-header">
                                <div class="budget-name">${b.name}</div>
                                <div class="budget-amount">${b.spent.toLocaleString()}‚ÇΩ / ${b.limit.toLocaleString()}‚ÇΩ</div>
                            </div>
                            <div class="budget-progress">
                                <div class="budget-fill ${fillClass}" style="width: ${percent}%"></div>
                            </div>
                            <div style="display: flex; justify-content: space-between; margin-top: 6px; font-size: 11px; color: #999;">
                                <span>${percent > 90 ? '‚ö†Ô∏è –ü–æ—á—Ç–∏ –∏—Å—á–µ—Ä–ø–∞–Ω' : percent > 60 ? 'üìä –°–ª–µ–¥–∏—Ç–µ –∑–∞ —Ç—Ä–∞—Ç–∞–º–∏' : '‚úÖ –í –Ω–æ—Ä–º–µ'}</span>
                                <span>~${dailyLimit > 0 ? dailyLimit : 0}‚ÇΩ/–¥–µ–Ω—å</span>
                            </div>
                        </div>
                    `;
                }).join('')}
                
                <!-- AI Recommendations -->
                <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 15px; border-radius: 8px; margin-top: 20px;">
                    <div style="font-size: 14px; font-weight: bold; margin-bottom: 8px;">ü§ñ AI –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏</div>
                    <div style="font-size: 13px; opacity: 0.95;">
                        ‚Ä¢ –°–æ–∫—Ä–∞—Ç–∏—Ç–µ —Ç—Ä–∞—Ç—ã –Ω–∞ —Ä–µ—Å—Ç–æ—Ä–∞–Ω—ã –Ω–∞ 20% –¥–æ –∫–æ–Ω—Ü–∞ –º–µ—Å—è—Ü–∞<br>
                        ‚Ä¢ –ü–µ—Ä–µ—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç–µ 2,000‚ÇΩ –∏–∑ —Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏–π –≤ –ø—Ä–æ–¥—É–∫—Ç—ã<br>
                        ‚Ä¢ –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –¥–Ω–µ–≤–Ω–æ–π –ª–∏–º–∏—Ç: 5,400‚ÇΩ
                    </div>
                </div>
            `;
        }
        
        function getGoalsContent() {
            const goals = [
                { name: '–û—Ç–ø—É—Å–∫ –≤ –ò—Ç–∞–ª–∏–∏', target: 200000, saved: 145000, deadline: '15.06.2026' },
                { name: '–ù–æ–≤—ã–π MacBook', target: 150000, saved: 67500, deadline: '01.12.2025' },
                { name: '–ü–æ–¥—É—à–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏', target: 300000, saved: 89000, deadline: '31.12.2026' }
            ];
            
            return `
                <h4 style="margin-bottom: 15px;">–§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ —Ü–µ–ª–∏</h4>
                ${goals.map(goal => {
                    const percent = (goal.saved / goal.target) * 100;
                    const monthlyNeeded = Math.round((goal.target - goal.saved) / 12);
                    
                    return `
                        <div style="background: white; padding: 15px; border-radius: 8px; margin-bottom: 15px; border: 1px solid #e0e0e0;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                                <div>
                                    <div style="font-size: 16px; font-weight: bold;">${goal.name}</div>
                                    <div style="font-size: 12px; color: #666;">–î–æ ${goal.deadline}</div>
                                </div>
                                <div style="text-align: right;">
                                    <div style="font-size: 16px; font-weight: bold; color: #4a90e2;">${Math.round(percent)}%</div>
                                    <div style="font-size: 12px; color: #666;">${goal.saved.toLocaleString()}‚ÇΩ</div>
                                </div>
                            </div>
                            
                            <div style="position: relative;">
                                <div class="budget-progress" style="height: 20px;">
                                    <div class="budget-fill" style="width: ${percent}%; background: linear-gradient(90deg, #4a90e2, #667eea);"></div>
                                </div>
                                ${percent >= 25 ? '<div style="position: absolute; left: 25%; top: -8px; transform: translateX(-50%);"><div style="font-size: 16px;">üèÜ</div></div>' : ''}
                                ${percent >= 50 ? '<div style="position: absolute; left: 50%; top: -8px; transform: translateX(-50%);"><div style="font-size: 16px;">üéØ</div></div>' : ''}
                                ${percent >= 75 ? '<div style="position: absolute; left: 75%; top: -8px; transform: translateX(-50%);"><div style="font-size: 16px;">üî•</div></div>' : ''}
                            </div>
                            
                            <div style="display: flex; justify-content: space-between; margin-top: 10px; font-size: 12px; color: #666;">
                                <span>–¶–µ–ª—å: ${goal.target.toLocaleString()}‚ÇΩ</span>
                                <span>–ù—É–∂–Ω–æ: ~${monthlyNeeded.toLocaleString()}‚ÇΩ/–º–µ—Å</span>
                            </div>
                            
                            <button onclick="addToGoal('${goal.name}')" style="width: 100%; margin-top: 10px; padding: 8px; background: #4a90e2; color: white; border: none; border-radius: 6px; cursor: pointer;">
                                + –î–æ–±–∞–≤–∏—Ç—å —Å—Ä–µ–¥—Å—Ç–≤–∞
                            </button>
                        </div>
                    `;
                }).join('')}
                
                <button onclick="showModal('goal')" style="width: 100%; padding: 12px; background: #f0f0f0; border: 2px dashed #999; border-radius: 8px; cursor: pointer; font-size: 14px; color: #666;">
                    + –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é —Ü–µ–ª—å
                </button>
            `;
        }
        
        function getAnalyticsContent() {
            return `
                <!-- Period Selector -->
                <div style="display: flex; gap: 10px; margin-bottom: 20px;">
                    <button class="sub-tab active" style="flex: 1;">–ù–µ–¥–µ–ª—è</button>
                    <button class="sub-tab" style="flex: 1;">–ú–µ—Å—è—Ü</button>
                    <button class="sub-tab" style="flex: 1;">–ö–≤–∞—Ä—Ç–∞–ª</button>
                    <button class="sub-tab" style="flex: 1;">–ì–æ–¥</button>
                </div>
                
                <!-- Spending Chart -->
                <div style="background: white; padding: 15px; border-radius: 8px; margin-bottom: 15px; border: 1px solid #e0e0e0;">
                    <h4 style="margin-bottom: 15px;">üìä –ì—Ä–∞—Ñ–∏–∫ —Ä–∞—Å—Ö–æ–¥–æ–≤</h4>
                    <div style="height: 150px; display: flex; align-items: flex-end; justify-content: space-around;">
                        <div style="width: 40px; background: #4a90e2; height: 60%;"></div>
                        <div style="width: 40px; background: #4a90e2; height: 80%;"></div>
                        <div style="width: 40px; background: #4a90e2; height: 45%;"></div>
                        <div style="width: 40px; background: #667eea; height: 90%;"></div>
                        <div style="width: 40px; background: #4a90e2; height: 70%;"></div>
                        <div style="width: 40px; background: #ff6b6b; height: 95%;"></div>
                        <div style="width: 40px; background: #4a90e2; height: 65%; opacity: 0.5;"></div>
                    </div>
                    <div style="display: flex; justify-content: space-around; margin-top: 5px; font-size: 11px; color: #666;">
                        <span>–ü–Ω</span><span>–í—Ç</span><span>–°—Ä</span><span>–ß—Ç</span><span>–ü—Ç</span><span>–°–±</span><span>–í—Å</span>
                    </div>
                </div>
                
                <!-- Category Breakdown -->
                <div style="background: white; padding: 15px; border-radius: 8px; margin-bottom: 15px; border: 1px solid #e0e0e0;">
                    <h4 style="margin-bottom: 15px;">üç∞ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–∞—Å—Ö–æ–¥–æ–≤</h4>
                    <div style="display: flex; justify-content: center; margin-bottom: 15px;">
                        <div style="width: 120px; height: 120px; border-radius: 50%; background: conic-gradient(#ff6b6b 0deg 126deg, #ffa500 126deg 198deg, #4a90e2 198deg 288deg, #9b59b6 288deg 360deg);"></div>
                    </div>
                    <div style="font-size: 13px;">
                        <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #f0f0f0;">
                            <span><span style="display: inline-block; width: 12px; height: 12px; background: #ff6b6b; border-radius: 2px; margin-right: 8px;"></span>–ü—Ä–æ–¥—É–∫—Ç—ã</span>
                            <strong>35% ¬∑ 23,765‚ÇΩ</strong>
                        </div>
                        <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #f0f0f0;">
                            <span><span style="display: inline-block; width: 12px; height: 12px; background: #ffa500; border-radius: 2px; margin-right: 8px;"></span>–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç</span>
                            <strong>20% ¬∑ 13,578‚ÇΩ</strong>
                        </div>
                        <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #f0f0f0;">
                            <span><span style="display: inline-block; width: 12px; height: 12px; background: #4a90e2; border-radius: 2px; margin-right: 8px;"></span>–†–µ—Å—Ç–æ—Ä–∞–Ω—ã</span>
                            <strong>25% ¬∑ 16,973‚ÇΩ</strong>
                        </div>
                        <div style="display: flex; justify-content: space-between; padding: 8px 0;">
                            <span><span style="display: inline-block; width: 12px; height: 12px; background: #9b59b6; border-radius: 2px; margin-right: 8px;"></span>–†–∞–∑–≤–ª–µ—á–µ–Ω–∏—è</span>
                            <strong>20% ¬∑ 13,574‚ÇΩ</strong>
                        </div>
                    </div>
                </div>
                
                <!-- Top Merchants -->
                <div style="background: white; padding: 15px; border-radius: 8px; margin-bottom: 15px; border: 1px solid #e0e0e0;">
                    <h4 style="margin-bottom: 15px;">üè™ –¢–û–ü –º–µ—Å—Ç —Ç—Ä–∞—Ç</h4>
                    <div style="font-size: 13px;">
                        <div style="display: flex; justify-content: space-between; padding: 8px 0;">
                            <span>1. –ü–µ—Ä–µ–∫—Ä–µ—Å—Ç–æ–∫</span>
                            <strong>8,450‚ÇΩ</strong>
                        </div>
                        <div style="display: flex; justify-content: space-between; padding: 8px 0;">
                            <span>2. –Ø–Ω–¥–µ–∫—Å.–¢–∞–∫—Å–∏</span>
                            <strong>6,230‚ÇΩ</strong>
                        </div>
                        <div style="display: flex; justify-content: space-between; padding: 8px 0;">
                            <span>3. –î–æ–¥–æ –ü–∏—Ü—Ü–∞</span>
                            <strong>4,890‚ÇΩ</strong>
                        </div>
                        <div style="display: flex; justify-content: space-between; padding: 8px 0;">
                            <span>4. –ú–∞–≥–Ω–∏—Ç</span>
                            <strong>3,670‚ÇΩ</strong>
                        </div>
                        <div style="display: flex; justify-content: space-between; padding: 8px 0;">
                            <span>5. –ö–∏–Ω–æ–ü–∞—Ä–∫</span>
                            <strong>2,400‚ÇΩ</strong>
                        </div>
                    </div>
                </div>
                
                <!-- Comparison -->
                <div style="background: #f0fff0; padding: 15px; border-radius: 8px;">
                    <h4 style="margin-bottom: 10px;">üìà –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –ø—Ä–æ—à–ª—ã–º –º–µ—Å—è—Ü–µ–º</h4>
                    <div style="font-size: 13px;">
                        <div>–í—ã —Ç—Ä–∞—Ç–∏—Ç–µ –Ω–∞ <strong style="color: #51cf66;">15% –º–µ–Ω—å—à–µ</strong></div>
                        <div style="margin-top: 5px;">–û—Å–Ω–æ–≤–Ω–∞—è —ç–∫–æ–Ω–æ–º–∏—è: –†–∞–∑–≤–ª–µ—á–µ–Ω–∏—è (-3,200‚ÇΩ)</div>
                        <div style="margin-top: 5px;">–†–æ—Å—Ç —Ç—Ä–∞—Ç: –ü—Ä–æ–¥—É–∫—Ç—ã (+1,450‚ÇΩ)</div>
                    </div>
                </div>
            `;
        }
        
        // PLANNER content
        function getPlannerContent() {
            return `
                <!-- Sub-tabs -->
                <div class="sub-tabs">
                    <div class="sub-tab active" onclick="loadPlannerSubTab('tasks')">–ó–∞–¥–∞—á–∏</div>
                    <div class="sub-tab" onclick="loadPlannerSubTab('focus')">–§–æ–∫—É—Å</div>
                    <div class="sub-tab" onclick="loadPlannerSubTab('habits')">–ü—Ä–∏–≤—ã—á–∫–∏</div>
                    <div class="sub-tab" onclick="loadPlannerSubTab('projects')">–ü—Ä–æ–µ–∫—Ç—ã</div>
                </div>
                
                <div id="plannerSubContent">
                    ${getTasksContent()}
                </div>
            `;
        }
        
        function getTasksContent() {
            return `
                <h3 style="margin-bottom: 15px;">–í—Å–µ –∑–∞–¥–∞—á–∏ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è</h3>
                ${tasks.map(task => `
                    <div class="task-item">
                        <div class="task-checkbox ${task.done ? 'checked' : ''}" onclick="toggleTask(${task.id})">
                            ${task.done ? '‚úì' : ''}
                        </div>
                        <div class="task-content">
                            <div class="task-title" style="${task.done ? 'text-decoration: line-through; opacity: 0.6;' : ''}">
                                ${task.title}
                            </div>
                            <div class="task-meta">
                                ‚è∞ ${task.time} ¬∑ üìÅ ${task.project} ¬∑ 
                                <span style="color: ${task.priority === 'high' ? '#ff6b6b' : task.priority === 'medium' ? '#ffa500' : '#4a90e2'}">
                                    ${task.priority === 'high' ? 'üî¥' : task.priority === 'medium' ? 'üü°' : 'üîµ'} ${task.priority}
                                </span>
                            </div>
                        </div>
                    </div>
                `).join('')}
            `;
        }
        
        function getFocusContent() {
            return `
                <div class="focus-timer">
                    <h3>üéØ –§–æ–∫—É—Å-—Å–µ—Å—Å–∏—è</h3>
                    <div class="timer-display" id="timerDisplay">25:00</div>
                    <div style="margin: 15px 0;">
                        <select style="padding: 8px; border-radius: 6px; border: 1px solid rgba(255,255,255,0.3); background: rgba(255,255,255,0.2); color: white;">
                            <option>Pomodoro (25/5)</option>
                            <option>Deep Work (90/20)</option>
                            <option>Flow (–±–µ–∑ –ª–∏–º–∏—Ç–∞)</option>
                            <option>Custom</option>
                        </select>
                    </div>
                    <div class="timer-controls">
                        <button class="timer-btn" onclick="toggleFocus()">
                            ${isFocusRunning ? '‚è∏ –ü–∞—É–∑–∞' : '‚ñ∂Ô∏è –°—Ç–∞—Ä—Ç'}
                        </button>
                        <button class="timer-btn" onclick="resetFocus()">üîÑ –°–±—Ä–æ—Å</button>
                    </div>
                </div>
                
                <h3 style="margin: 20px 0 10px;">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–µ–≥–æ–¥–Ω—è</h3>
                <div style="background: white; padding: 15px; border-radius: 8px; border: 1px solid #e0e0e0;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                        <span>–°–µ—Å—Å–∏–π –∑–∞–≤–µ—Ä—à–µ–Ω–æ:</span>
                        <strong>2</strong>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                        <span>–û–±—â–µ–µ –≤—Ä–µ–º—è —Ñ–æ–∫—É—Å–∞:</span>
                        <strong>45 –º–∏–Ω—É—Ç</strong>
                    </div>
                    <div style="display: flex; justify-content: space-between;">
                        <span>–°—Ä–µ–¥–Ω—è—è –æ—Ü–µ–Ω–∫–∞:</span>
                        <strong>4.5 ‚≠ê</strong>
                    </div>
                </div>
            `;
        }
        
        function getHabitsContent() {
            return `
                <h3 style="margin-bottom: 15px;">–ü—Ä–∏–≤—ã—á–∫–∏ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è</h3>
                ${habits.map(habit => `
                    <div class="habit-item">
                        <div class="habit-info">
                            <div class="habit-name">${habit.name}</div>
                            <div class="habit-streak">üî• ${habit.streak} –¥–Ω–µ–π –ø–æ–¥—Ä—è–¥ ¬∑ ‚è∞ ${habit.time}</div>
                        </div>
                        <div class="habit-check ${habit.done ? 'done' : ''}" onclick="toggleHabit(${habit.id})">
                            ${habit.done ? '‚úì' : ''}
                        </div>
                    </div>
                `).join('')}
            `;
        }
        
        // INSIGHTS content
        function getInsightsContent() {
            return `
                <div style="margin-bottom: 20px; padding: 15px; background: #f0f8ff; border-radius: 8px; font-size: 14px; color: #4a90e2;">
                    üí° AI –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≤–∞—à–∏ –¥–∞–Ω–Ω—ã–µ –∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –∏–Ω—Å–∞–π—Ç—ã –∫–∞–∂–¥–æ–µ —É—Ç—Ä–æ
                </div>
                
                ${insights.map(insight => `
                    <div class="insight-card">
                        <div class="insight-title">
                            ${insight.type === 'productivity' ? 'üìà' : insight.type === 'finance' ? 'üí∞' : 'üîó'} 
                            ${insight.title}
                        </div>
                        <div class="insight-content">${insight.content}</div>
                        <div class="insight-actions">
                            <div class="insight-action" onclick="alert('–ü—Ä–∏–º–µ–Ω—è—é —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—é: ${insight.title}')">
                                ‚úÖ –ü—Ä–∏–º–µ–Ω–∏—Ç—å
                            </div>
                            <div class="insight-action" onclick="alert('–ü–æ–∫–∞–∑—ã–≤–∞—é –¥–µ—Ç–∞–ª—å–Ω—É—é –∞–Ω–∞–ª–∏—Ç–∏–∫—É')">
                                üìä –î–µ—Ç–∞–ª–∏
                            </div>
                            <div class="insight-action" onclick="hideInsight(${insight.id})">
                                ‚ùå –°–∫—Ä—ã—Ç—å
                            </div>
                        </div>
                    </div>
                `).join('')}
            `;
        }
        
        // MORE content
        function getMoreContent() {
            return `
                <!-- User Profile Card -->
                <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 12px; margin-bottom: 25px;">
                    <div style="display: flex; align-items: center; margin-bottom: 15px;">
                        <div style="width: 60px; height: 60px; background: rgba(255,255,255,0.3); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 28px; margin-right: 15px;">
                            üë§
                        </div>
                        <div>
                            <div style="font-size: 20px; font-weight: bold;">–ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ò–≤–∞–Ω–æ–≤</div>
                            <div style="font-size: 14px; opacity: 0.9;">alex.ivanov@email.com</div>
                            <div style="font-size: 12px; opacity: 0.8; margin-top: 2px;">Premium –¥–æ 25.09.2025</div>
                        </div>
                    </div>
                    <div style="display: flex; justify-content: space-around; padding-top: 15px; border-top: 1px solid rgba(255,255,255,0.2);">
                        <div style="text-align: center;">
                            <div style="font-size: 20px; font-weight: bold;">142</div>
                            <div style="font-size: 12px; opacity: 0.9;">–î–Ω–µ–π —Å –Ω–∞–º–∏</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 20px; font-weight: bold;">89%</div>
                            <div style="font-size: 12px; opacity: 0.9;">–í—ã–ø–æ–ª–Ω–µ–Ω–æ</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 20px; font-weight: bold;">4.6</div>
                            <div style="font-size: 12px; opacity: 0.9;">–°—Ä. —Ñ–æ–∫—É—Å</div>
                        </div>
                    </div>
                </div>
                
                <div class="settings-section">
                    <div class="settings-title">üë§ –ü—Ä–æ—Ñ–∏–ª—å –∏ –∞–∫–∫–∞—É–Ω—Ç</div>
                    <div class="setting-item" onclick="showUserProfile()">
                        <div class="setting-label">üìù –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</div>
                        <div class="setting-value">‚Ä∫</div>
                    </div>
                    <div class="setting-item" onclick="alert('–û—Ç–∫—Ä—ã–≤–∞—é –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Passkeys')">
                        <div class="setting-label">üîê Passkeys –≤—Ö–æ–¥</div>
                        <div class="setting-value">–í–∫–ª—é—á–µ–Ω</div>
                    </div>
                    <div class="setting-item" onclick="alert('–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–æ–π Premium')">
                        <div class="setting-label">‚≠ê Premium –ø–æ–¥–ø–∏—Å–∫–∞</div>
                        <div class="setting-value">–ê–∫—Ç–∏–≤–Ω–∞</div>
                    </div>
                    <div class="setting-item" onclick="showDevicesList()">
                        <div class="setting-label">üì± –£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞</div>
                        <div class="setting-value">3 –∞–∫—Ç–∏–≤–Ω—ã—Ö</div>
                    </div>
                    <div class="setting-item" onclick="alert('–ñ—É—Ä–Ω–∞–ª –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∑–∞ 30 –¥–Ω–µ–π')">
                        <div class="setting-label">üìä –ò—Å—Ç–æ—Ä–∏—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏</div>
                        <div class="setting-value">‚Ä∫</div>
                    </div>
                </div>
                
                <div class="settings-section">
                    <div class="settings-title">üé® –í–Ω–µ—à–Ω–∏–π –≤–∏–¥</div>
                    <div class="setting-item" onclick="alert('–í—ã–±–æ—Ä —Ç–µ–º—ã')">
                        <div class="setting-label">üåô –¢–µ–º–∞</div>
                        <div class="setting-value">–°–∏—Å—Ç–µ–º–Ω–∞—è</div>
                    </div>
                    <div class="setting-item" onclick="alert('–í—ã–±–æ—Ä –∞–∫—Ü–µ–Ω—Ç–Ω–æ–≥–æ —Ü–≤–µ—Ç–∞')">
                        <div class="setting-label">üé® –ê–∫—Ü–µ–Ω—Ç–Ω—ã–π —Ü–≤–µ—Ç</div>
                        <div class="setting-value">–°–∏–Ω–∏–π</div>
                    </div>
                </div>
                
                <div class="settings-section">
                    <div class="settings-title">üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</div>
                    <div class="setting-item" onclick="alert('–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –∑–∞–¥–∞—á')">
                        <div class="setting-label">üìã –ó–∞–¥–∞—á–∏</div>
                        <div class="setting-value">–í–∫–ª—é—á–µ–Ω—ã</div>
                    </div>
                    <div class="setting-item" onclick="alert('–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –∞–ª–µ—Ä—Ç–æ–≤')">
                        <div class="setting-label">üí∞ –§–∏–Ω–∞–Ω—Å—ã</div>
                        <div class="setting-value">–í–∞–∂–Ω—ã–µ</div>
                    </div>
                    <div class="setting-item" onclick="alert('–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–∏—Ö–∏—Ö —á–∞—Å–æ–≤')">
                        <div class="setting-label">üåô –¢–∏—Ö–∏–µ —á–∞—Å—ã</div>
                        <div class="setting-value">22:00 - 08:00</div>
                    </div>
                </div>
                
                <div class="settings-section">
                    <div class="settings-title">üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å</div>
                    <div class="setting-item" onclick="alert('–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∏–æ–º–µ—Ç—Ä–∏–∏')">
                        <div class="setting-label">üëÜ –ë–∏–æ–º–µ—Ç—Ä–∏—è</div>
                        <div class="setting-value">Face ID</div>
                    </div>
                    <div class="setting-item" onclick="alert('–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞—â–∏—Ç–∞ —Ñ–∏–Ω–∞–Ω—Å–æ–≤')">
                        <div class="setting-label">üîê –ó–∞—â–∏—Ç–∞ Finance</div>
                        <div class="setting-value">–í–∫–ª—é—á–µ–Ω–∞</div>
                    </div>
                    <div class="setting-item" onclick="alert('–ù–∞—Å—Ç—Ä–æ–π–∫–∏ AI –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏')">
                        <div class="setting-label">ü§ñ AI –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å</div>
                        <div class="setting-value">–ì–∏–±—Ä–∏–¥</div>
                    </div>
                </div>
                
                <div class="settings-section">
                    <div class="settings-title">‚òÅÔ∏è –î–∞–Ω–Ω—ã–µ –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è</div>
                    <div class="setting-item" onclick="alert('–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏')">
                        <div class="setting-label">üîÑ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è</div>
                        <div class="setting-value">–†–µ–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è</div>
                    </div>
                    <div class="setting-item" onclick="alert('–≠–∫—Å–ø–æ—Ä—Ç –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö')">
                        <div class="setting-label">üì§ –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö</div>
                        <div class="setting-value">‚Ä∫</div>
                    </div>
                </div>
                
                <div class="settings-section">
                    <div class="settings-title">üîå –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏</div>
                    <div class="setting-item" onclick="alert('–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫–∞–ª–µ–Ω–¥–∞—Ä—è')">
                        <div class="setting-label">üìÖ –ö–∞–ª–µ–Ω–¥–∞—Ä—å</div>
                        <div class="setting-value">Apple Calendar</div>
                    </div>
                    <div class="setting-item" onclick="alert('–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Apple Health')">
                        <div class="setting-label">‚ù§Ô∏è –ó–¥–æ—Ä–æ–≤—å–µ</div>
                        <div class="setting-value">Apple Health</div>
                    </div>
                    <div class="setting-item" onclick="alert('–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–∏–¥–∂–µ—Ç–æ–≤')">
                        <div class="setting-label">‚ö° –í–∏–¥–∂–µ—Ç—ã</div>
                        <div class="setting-value">3 –∞–∫—Ç–∏–≤–Ω—ã—Ö</div>
                    </div>
                </div>
            `;
        }
        
        // Sub-tab loading functions
        function loadFinanceSubTab(subTab) {
            currentSubTab = subTab;
            document.querySelectorAll('.sub-tab').forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');
            
            const content = document.getElementById('financeSubContent');
            switch(subTab) {
                case 'transactions':
                    content.innerHTML = getTransactionsContent();
                    break;
                case 'budgets':
                    content.innerHTML = getBudgetsContent();
                    break;
                case 'goals':
                    content.innerHTML = getGoalsContent();
                    break;
                case 'debts':
                    content.innerHTML = getDebtsContent();
                    break;
                case 'analytics':
                    content.innerHTML = getAnalyticsContent();
                    break;
            }
        }
        
        function getDebtsContent() {
            const debts = [
                { id: 1, person: '–ê–Ω–¥—Ä–µ–π –ü–µ—Ç—Ä–æ–≤', amount: 3500, type: 'they_owe', description: '–£–∂–∏–Ω –≤ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–µ', date: '20.08.2025', avatar: 'üë®', overdue: false },
                { id: 2, person: '–ú–∞—Ä–∏—è –ò–≤–∞–Ω–æ–≤–∞', amount: 1200, type: 'i_owe', description: '–¢–∞–∫—Å–∏ –∏–∑ –∞—ç—Ä–æ–ø–æ—Ä—Ç–∞', date: '18.08.2025', avatar: 'üë©', overdue: false },
                { id: 3, person: '–û–ª–µ–≥ –°–∏–¥–æ—Ä–æ–≤', amount: 5000, type: 'they_owe', description: '–ü–æ–¥–∞—Ä–æ–∫ –Ω–∞ –î–† –∫–æ–ª–ª–µ–≥–∏', date: '10.08.2025', avatar: 'üë®‚Äçüíº', overdue: true },
                { id: 4, person: '–ï–ª–µ–Ω–∞ –ö.', amount: 800, type: 'i_owe', description: '–ö–æ—Ñ–µ –∏ –æ–±–µ–¥', date: '23.08.2025', avatar: 'üë©‚Äçüíª', overdue: false },
                { id: 5, person: '–ì—Ä—É–ø–ø–∞ "–ü–æ–µ–∑–¥–∫–∞ –≤ –°–æ—á–∏"', amount: 12500, type: 'they_owe', description: '–ú–æ—è —á–∞—Å—Ç—å –∑–∞ –æ—Ç–µ–ª—å', date: '15.07.2025', avatar: 'üë•', overdue: true }
            ];
            
            const theyOweTotal = debts.filter(d => d.type === 'they_owe').reduce((sum, d) => sum + d.amount, 0);
            const iOweTotal = debts.filter(d => d.type === 'i_owe').reduce((sum, d) => sum + d.amount, 0);
            const balance = theyOweTotal - iOweTotal;
            
            return `
                <!-- Balance Summary -->
                <div style="background: linear-gradient(135deg, #4a90e2 0%, #667eea 100%); color: white; padding: 20px; border-radius: 12px; margin-bottom: 20px;">
                    <div style="text-align: center;">
                        <div style="font-size: 12px; opacity: 0.9; margin-bottom: 5px;">–ë–∞–ª–∞–Ω—Å –≤–∑–∞–∏–º–æ—Ä–∞—Å—á–µ—Ç–æ–≤</div>
                        <div style="font-size: 28px; font-weight: bold;">
                            ${balance > 0 ? '+' : ''}${balance.toLocaleString()}‚ÇΩ
                        </div>
                        <div style="font-size: 13px; opacity: 0.9; margin-top: 5px;">
                            ${balance > 0 ? '–í–∞–º –¥–æ–ª–∂–Ω—ã –±–æ–ª—å—à–µ' : balance < 0 ? '–í—ã –¥–æ–ª–∂–Ω—ã –±–æ–ª—å—à–µ' : '–ë–∞–ª–∞–Ω—Å —Å–≤–µ–¥–µ–Ω'}
                        </div>
                    </div>
                    <div style="display: flex; justify-content: space-around; margin-top: 20px; padding-top: 15px; border-top: 1px solid rgba(255,255,255,0.2);">
                        <div style="text-align: center;">
                            <div style="font-size: 20px; font-weight: bold; color: #51cf66;">+${theyOweTotal.toLocaleString()}‚ÇΩ</div>
                            <div style="font-size: 11px; opacity: 0.9;">–ú–Ω–µ –¥–æ–ª–∂–Ω—ã</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 20px; font-weight: bold; color: #ff6b6b;">-${iOweTotal.toLocaleString()}‚ÇΩ</div>
                            <div style="font-size: 11px; opacity: 0.9;">–Ø –¥–æ–ª–∂–µ–Ω</div>
                        </div>
                    </div>
                </div>
                
                <!-- Quick Actions -->
                <div style="display: flex; gap: 10px; margin-bottom: 20px;">
                    <button onclick="createDebt('they_owe')" style="flex: 1; padding: 12px; background: #e8f5e9; border: none; border-radius: 8px; cursor: pointer; font-size: 14px;">
                        <span style="color: #4caf50;">üì• –ú–Ω–µ –¥–æ–ª–∂–Ω—ã</span>
                    </button>
                    <button onclick="createDebt('i_owe')" style="flex: 1; padding: 12px; background: #ffebee; border: none; border-radius: 8px; cursor: pointer; font-size: 14px;">
                        <span style="color: #f44336;">üì§ –Ø –¥–æ–ª–∂–µ–Ω</span>
                    </button>
                    <button onclick="splitBill()" style="flex: 1; padding: 12px; background: #e3f2fd; border: none; border-radius: 8px; cursor: pointer; font-size: 14px;">
                        <span style="color: #2196f3;">‚ûó –†–∞–∑–¥–µ–ª–∏—Ç—å —Å—á–µ—Ç</span>
                    </button>
                </div>
                
                <!-- Filter Tabs -->
                <div style="display: flex; gap: 10px; margin-bottom: 15px;">
                    <button class="sub-tab active" style="flex: 1; font-size: 13px;">–í—Å–µ (${debts.length})</button>
                    <button class="sub-tab" style="flex: 1; font-size: 13px;">–ú–Ω–µ –¥–æ–ª–∂–Ω—ã (3)</button>
                    <button class="sub-tab" style="flex: 1; font-size: 13px;">–Ø –¥–æ–ª–∂–µ–Ω (2)</button>
                    <button class="sub-tab" style="flex: 1; font-size: 13px; color: #ff6b6b;">–ü—Ä–æ—Å—Ä–æ—á–µ–Ω—ã (2)</button>
                </div>
                
                <!-- Debts List -->
                ${debts.map(debt => `
                    <div style="background: white; padding: 15px; border-radius: 8px; margin-bottom: 12px; border-left: 3px solid ${debt.type === 'they_owe' ? '#4caf50' : '#f44336'}; ${debt.overdue ? 'box-shadow: 0 0 0 1px #ff6b6b;' : ''}">
                        <div style="display: flex; justify-content: space-between; align-items: start;">
                            <div style="display: flex; gap: 12px;">
                                <div style="font-size: 24px;">${debt.avatar}</div>
                                <div>
                                    <div style="font-weight: bold; font-size: 14px;">
                                        ${debt.person}
                                        ${debt.overdue ? '<span style="background: #ff6b6b; color: white; padding: 2px 6px; border-radius: 4px; font-size: 10px; margin-left: 8px;">–ü—Ä–æ—Å—Ä–æ—á–µ–Ω–æ</span>' : ''}
                                    </div>
                                    <div style="font-size: 13px; color: #666; margin: 4px 0;">${debt.description}</div>
                                    <div style="font-size: 12px; color: #999;">
                                        üìÖ ${debt.date}
                                        ${debt.overdue ? ' ¬∑ ‚è∞ –ü—Ä–æ—Å—Ä–æ—á–µ–Ω–æ –Ω–∞ ' + Math.floor(Math.random() * 10 + 5) + ' –¥–Ω–µ–π' : ''}
                                    </div>
                                </div>
                            </div>
                            <div style="text-align: right;">
                                <div style="font-size: 18px; font-weight: bold; color: ${debt.type === 'they_owe' ? '#4caf50' : '#f44336'};">
                                    ${debt.type === 'they_owe' ? '+' : '-'}${debt.amount.toLocaleString()}‚ÇΩ
                                </div>
                                <button onclick="showDebtActions(${debt.id})" style="margin-top: 8px; padding: 4px 8px; background: #f0f0f0; border: none; border-radius: 4px; cursor: pointer; font-size: 12px;">
                                    –î–µ–π—Å—Ç–≤–∏—è ‚Ä∫
                                </button>
                            </div>
                        </div>
                    </div>
                `).join('')}
                
                <!-- Reminders -->
                <div style="background: #fff3cd; padding: 12px; border-radius: 8px; margin-top: 20px;">
                    <div style="font-size: 13px; font-weight: bold; margin-bottom: 8px;">üîî –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è</div>
                    <div style="font-size: 12px; line-height: 1.6;">
                        ‚Ä¢ <strong>–û–ª–µ–≥ –°–∏–¥–æ—Ä–æ–≤</strong> –Ω–µ –≤–µ—Ä–Ω—É–ª 5,000‚ÇΩ —É–∂–µ 15 –¥–Ω–µ–π<br>
                        ‚Ä¢ <strong>–ì—Ä—É–ø–ø–∞ "–ü–æ–µ–∑–¥–∫–∞ –≤ –°–æ—á–∏"</strong> - –Ω–∞–ø–æ–º–Ω–∏—Ç—å –æ –¥–æ–ª–≥–µ –∑–∞ –æ—Ç–µ–ª—å<br>
                        ‚Ä¢ <strong>–ú–∞—Ä–∏—è –ò–≤–∞–Ω–æ–≤–∞</strong> - –≤–µ—Ä–Ω—É—Ç—å –¥–æ–ª–≥ –¥–æ –∫–æ–Ω—Ü–∞ –Ω–µ–¥–µ–ª–∏
                    </div>
                </div>
                
                <!-- Stats -->
                <div style="margin-top: 20px; padding: 15px; background: #f5f5f5; border-radius: 8px;">
                    <div style="font-size: 13px; font-weight: bold; margin-bottom: 10px;">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; font-size: 12px;">
                        <div>–ê–∫—Ç–∏–≤–Ω—ã—Ö –¥–æ–ª–≥–æ–≤: <strong>5</strong></div>
                        <div>–ü–æ–≥–∞—à–µ–Ω–æ –≤ —ç—Ç–æ–º –º–µ—Å—è—Ü–µ: <strong>8</strong></div>
                        <div>–°—Ä–µ–¥–Ω–∏–π —Å—Ä–æ–∫ –≤–æ–∑–≤—Ä–∞—Ç–∞: <strong>12 –¥–Ω–µ–π</strong></div>
                        <div>–û–±—â–∏–π –æ–±–æ—Ä–æ—Ç: <strong>45,600‚ÇΩ</strong></div>
                    </div>
                </div>
            `;
        }
        
        function createDebt(type) {
            const modal = document.getElementById('modal');
            const modalTitle = document.getElementById('modalTitle');
            const modalBody = document.getElementById('modalBody');
            
            modalTitle.textContent = type === 'they_owe' ? 'üì• –ù–æ–≤—ã–π –¥–æ–ª–≥ (–º–Ω–µ –¥–æ–ª–∂–Ω—ã)' : 'üì§ –ù–æ–≤—ã–π –¥–æ–ª–≥ (—è –¥–æ–ª–∂–µ–Ω)';
            modalBody.innerHTML = `
                <div class="form-group">
                    <label class="form-label">–ö—Ç–æ ${type === 'they_owe' ? '–¥–æ–ª–∂–µ–Ω' : '–∫–æ–º—É —è –¥–æ–ª–∂–µ–Ω'}</label>
                    <input type="text" class="form-input" placeholder="–ò–º—è —á–µ–ª–æ–≤–µ–∫–∞ –∏–ª–∏ –≥—Ä—É–ø–ø—ã">
                </div>
                <div class="form-group">
                    <label class="form-label">–°—É–º–º–∞</label>
                    <input type="number" class="form-input" placeholder="0 ‚ÇΩ" autofocus>
                </div>
                <div class="form-group">
                    <label class="form-label">–ó–∞ —á—Ç–æ</label>
                    <input type="text" class="form-input" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –û–±–µ–¥ –≤ –∫–∞—Ñ–µ">
                </div>
                <div class="form-group">
                    <label class="form-label">–î–∞—Ç–∞ –≤–æ–∑–≤—Ä–∞—Ç–∞</label>
                    <input type="date" class="form-input">
                </div>
                <div class="form-group">
                    <label class="form-label">–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ</label>
                    <select class="form-input">
                        <option>–ó–∞ –¥–µ–Ω—å –¥–æ —Å—Ä–æ–∫–∞</option>
                        <option>–ó–∞ 3 –¥–Ω—è –¥–æ —Å—Ä–æ–∫–∞</option>
                        <option>–ó–∞ –Ω–µ–¥–µ–ª—é –¥–æ —Å—Ä–æ–∫–∞</option>
                        <option>–ö–∞–∂–¥—É—é –Ω–µ–¥–µ–ª—é</option>
                        <option>–ë–µ–∑ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">–ó–∞–º–µ—Ç–∫–∞</label>
                    <textarea class="form-input" rows="2" placeholder="–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è..."></textarea>
                </div>
                <div class="form-buttons">
                    <button class="btn btn-secondary" onclick="closeModal()">–û—Ç–º–µ–Ω–∞</button>
                    <button class="btn btn-primary" onclick="saveAndClose('–î–æ–ª–≥ –¥–æ–±–∞–≤–ª–µ–Ω!')">–°–æ–∑–¥–∞—Ç—å</button>
                </div>
            `;
            
            modal.classList.add('open');
        }
        
        function splitBill() {
            const modal = document.getElementById('modal');
            const modalTitle = document.getElementById('modalTitle');
            const modalBody = document.getElementById('modalBody');
            
            modalTitle.textContent = '‚ûó –†–∞–∑–¥–µ–ª–∏—Ç—å —Å—á–µ—Ç';
            modalBody.innerHTML = `
                <div class="form-group">
                    <label class="form-label">–û–±—â–∞—è —Å—É–º–º–∞ —Å—á–µ—Ç–∞</label>
                    <input type="number" class="form-input" placeholder="0 ‚ÇΩ" id="totalAmount" onchange="updateSplitAmount()">
                </div>
                <div class="form-group">
                    <label class="form-label">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ (–≤–∫–ª—é—á–∞—è –≤–∞—Å)</label>
                    <input type="number" class="form-input" value="2" min="2" id="participantsCount" onchange="updateSplitAmount()">
                </div>
                <div style="background: #f0f8ff; padding: 12px; border-radius: 6px; margin: 15px 0;">
                    <div style="font-size: 13px;">–ö–∞–∂–¥—ã–π –ø–ª–∞—Ç–∏—Ç: <strong id="perPersonAmount">0‚ÇΩ</strong></div>
                    <div style="font-size: 13px; margin-top: 5px;">–í–∞–º –¥–æ–ª–∂–Ω—ã: <strong id="othersOweAmount">0‚ÇΩ</strong></div>
                </div>
                <div class="form-group">
                    <label class="form-label">–£—á–∞—Å—Ç–Ω–∏–∫–∏ (–∫—Ç–æ –¥–æ–ª–∂–µ–Ω)</label>
                    <div id="participantsList">
                        <input type="text" class="form-input" placeholder="–ò–º—è —É—á–∞—Å—Ç–Ω–∏–∫–∞ 1" style="margin-bottom: 8px;">
                    </div>
                    <button onclick="addParticipantField()" style="width: 100%; padding: 8px; background: #f0f0f0; border: 1px dashed #999; border-radius: 6px; cursor: pointer; font-size: 13px; margin-top: 8px;">
                        + –î–æ–±–∞–≤–∏—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–∞
                    </button>
                </div>
                <div class="form-group">
                    <label class="form-label">–û–ø–∏—Å–∞–Ω–∏–µ</label>
                    <input type="text" class="form-input" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –£–∂–∏–Ω –≤ –î–æ–¥–æ –ü–∏—Ü—Ü–∞">
                </div>
                <div class="form-buttons">
                    <button class="btn btn-secondary" onclick="closeModal()">–û—Ç–º–µ–Ω–∞</button>
                    <button class="btn btn-primary" onclick="saveAndClose('–°—á–µ—Ç —Ä–∞–∑–¥–µ–ª–µ–Ω! –î–æ–ª–≥–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã.')">–†–∞–∑–¥–µ–ª–∏—Ç—å</button>
                </div>
            `;
            
            modal.classList.add('open');
        }
        
        function showDebtActions(id) {
            const modal = document.getElementById('modal');
            const modalTitle = document.getElementById('modalTitle');
            const modalBody = document.getElementById('modalBody');
            
            modalTitle.textContent = '‚ö° –î–µ–π—Å—Ç–≤–∏—è —Å –¥–æ–ª–≥–æ–º';
            modalBody.innerHTML = `
                <div style="display: flex; flex-direction: column; gap: 10px;">
                    <button onclick="markDebtPaid(${id})" style="padding: 15px; background: #e8f5e9; border: none; border-radius: 8px; cursor: pointer; text-align: left;">
                        <div style="font-size: 16px; color: #4caf50;">‚úÖ –û—Ç–º–µ—Ç–∏—Ç—å –∫–∞–∫ –ø–æ–≥–∞—à–µ–Ω–Ω—ã–π</div>
                        <div style="font-size: 12px; color: #666; margin-top: 4px;">–î–æ–ª–≥ –±—É–¥–µ—Ç –ø–µ—Ä–µ–º–µ—â–µ–Ω –≤ –∏—Å—Ç–æ—Ä–∏—é</div>
                    </button>
                    
                    <button onclick="partialPayment(${id})" style="padding: 15px; background: #e3f2fd; border: none; border-radius: 8px; cursor: pointer; text-align: left;">
                        <div style="font-size: 16px; color: #2196f3;">üí∞ –ß–∞—Å—Ç–∏—á–Ω–æ–µ –ø–æ–≥–∞—à–µ–Ω–∏–µ</div>
                        <div style="font-size: 12px; color: #666; margin-top: 4px;">–£–º–µ–Ω—å—à–∏—Ç—å —Å—É–º–º—É –¥–æ–ª–≥–∞</div>
                    </button>
                    
                    <button onclick="sendReminder(${id})" style="padding: 15px; background: #fff3cd; border: none; border-radius: 8px; cursor: pointer; text-align: left;">
                        <div style="font-size: 16px; color: #ff9800;">üîî –û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ</div>
                        <div style="font-size: 12px; color: #666; margin-top: 4px;">–ß–µ—Ä–µ–∑ –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä –∏–ª–∏ SMS</div>
                    </button>
                    
                    <button onclick="editDebt(${id})" style="padding: 15px; background: #f5f5f5; border: none; border-radius: 8px; cursor: pointer; text-align: left;">
                        <div style="font-size: 16px; color: #666;">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</div>
                        <div style="font-size: 12px; color: #999; margin-top: 4px;">–ò–∑–º–µ–Ω–∏—Ç—å –¥–µ—Ç–∞–ª–∏ –¥–æ–ª–≥–∞</div>
                    </button>
                    
                    <button onclick="deleteDebt(${id})" style="padding: 15px; background: #ffebee; border: none; border-radius: 8px; cursor: pointer; text-align: left;">
                        <div style="font-size: 16px; color: #f44336;">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</div>
                        <div style="font-size: 12px; color: #666; margin-top: 4px;">–ü–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª–∏—Ç—å –∑–∞–ø–∏—Å—å</div>
                    </button>
                </div>
                
                <div class="form-buttons" style="margin-top: 20px;">
                    <button class="btn btn-secondary" onclick="closeModal()">–ó–∞–∫—Ä—ã—Ç—å</button>
                </div>
            `;
            
            modal.classList.add('open');
        }
        
        function updateSplitAmount() {
            const total = parseFloat(document.getElementById('totalAmount').value) || 0;
            const count = parseInt(document.getElementById('participantsCount').value) || 2;
            const perPerson = Math.round(total / count);
            const othersOwe = perPerson * (count - 1);
            
            document.getElementById('perPersonAmount').textContent = perPerson.toLocaleString() + '‚ÇΩ';
            document.getElementById('othersOweAmount').textContent = othersOwe.toLocaleString() + '‚ÇΩ';
        }
        
        function addParticipantField() {
            const list = document.getElementById('participantsList');
            const input = document.createElement('input');
            input.type = 'text';
            input.className = 'form-input';
            input.placeholder = '–ò–º—è —É—á–∞—Å—Ç–Ω–∏–∫–∞ ' + (list.children.length + 1);
            input.style.marginBottom = '8px';
            list.appendChild(input);
        }
        
        // Finance specific functions
        function showTransactionDetails(id) {
            const transaction = transactions.find(t => t.id === id);
            if (!transaction) return;
            
            const modal = document.getElementById('modal');
            const modalTitle = document.getElementById('modalTitle');
            const modalBody = document.getElementById('modalBody');
            
            modalTitle.textContent = 'üí∞ –î–µ—Ç–∞–ª–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏';
            modalBody.innerHTML = `
                <div style="text-align: center; margin-bottom: 20px;">
                    <div style="font-size: 32px; margin-bottom: 10px;">${transaction.type === 'income' ? 'üíµ' : 'üí∏'}</div>
                    <div style="font-size: 24px; font-weight: bold; color: ${transaction.type === 'income' ? '#51cf66' : '#ff6b6b'};">
                        ${transaction.amount > 0 ? '+' : ''}${transaction.amount.toLocaleString()}‚ÇΩ
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">–û–ø–∏—Å–∞–Ω–∏–µ</label>
                    <input type="text" class="form-input" value="${transaction.description}">
                </div>
                <div class="form-group">
                    <label class="form-label">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</label>
                    <select class="form-input">
                        <option ${transaction.category === '–ü—Ä–æ–¥—É–∫—Ç—ã' ? 'selected' : ''}>–ü—Ä–æ–¥—É–∫—Ç—ã</option>
                        <option ${transaction.category === '–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç' ? 'selected' : ''}>–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç</option>
                        <option ${transaction.category === '–†–µ—Å—Ç–æ—Ä–∞–Ω—ã' ? 'selected' : ''}>–†–µ—Å—Ç–æ—Ä–∞–Ω—ã</option>
                        <option ${transaction.category === '–†–∞–∑–≤–ª–µ—á–µ–Ω–∏—è' ? 'selected' : ''}>–†–∞–∑–≤–ª–µ—á–µ–Ω–∏—è</option>
                        <option ${transaction.category === '–î–æ—Ö–æ–¥' ? 'selected' : ''}>–î–æ—Ö–æ–¥</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è</label>
                    <input type="datetime-local" class="form-input" value="2025-08-25T14:30">
                </div>
                <div class="form-group">
                    <label class="form-label">–°—á–µ—Ç</label>
                    <select class="form-input">
                        <option>–¢–∏–Ω—å–∫–æ—Ñ—Ñ Black</option>
                        <option>–°–±–µ—Ä–±–∞–Ω–∫</option>
                        <option>–ù–∞–ª–∏—á–Ω—ã–µ</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">–¢–µ–≥–∏</label>
                    <input type="text" class="form-input" placeholder="#–æ–±–µ–¥ #—Ä–∞–±–æ—Ç–∞">
                </div>
                <div class="form-group">
                    <label class="form-label">–ó–∞–º–µ—Ç–∫–∞</label>
                    <textarea class="form-input" rows="3" placeholder="–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è..."></textarea>
                </div>
                
                <div class="form-buttons">
                    <button class="btn btn-secondary" onclick="closeModal()">–û—Ç–º–µ–Ω–∞</button>
                    <button class="btn btn-primary" onclick="saveAndClose('–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞!')">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                </div>
            `;
            
            modal.classList.add('open');
        }
        
        function showTransactionFilters() {
            const modal = document.getElementById('modal');
            const modalTitle = document.getElementById('modalTitle');
            const modalBody = document.getElementById('modalBody');
            
            modalTitle.textContent = 'üéØ –§–∏–ª—å—Ç—Ä—ã —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π';
            modalBody.innerHTML = `
                <div class="form-group">
                    <label class="form-label">–ü–µ—Ä–∏–æ–¥</label>
                    <select class="form-input">
                        <option>–°–µ–≥–æ–¥–Ω—è</option>
                        <option>–í—á–µ—Ä–∞</option>
                        <option>–ü–æ—Å–ª–µ–¥–Ω–∏–µ 7 –¥–Ω–µ–π</option>
                        <option>–≠—Ç–æ—Ç –º–µ—Å—è—Ü</option>
                        <option>–ü—Ä–æ—à–ª—ã–π –º–µ—Å—è—Ü</option>
                        <option>–ü—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–π –ø–µ—Ä–∏–æ–¥</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">–ö–∞—Ç–µ–≥–æ—Ä–∏–∏</label>
                    <div style="display: flex; flex-wrap: wrap; gap: 8px;">
                        <label style="display: flex; align-items: center;"><input type="checkbox" checked> <span style="margin-left: 5px;">–ü—Ä–æ–¥—É–∫—Ç—ã</span></label>
                        <label style="display: flex; align-items: center;"><input type="checkbox" checked> <span style="margin-left: 5px;">–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç</span></label>
                        <label style="display: flex; align-items: center;"><input type="checkbox" checked> <span style="margin-left: 5px;">–†–µ—Å—Ç–æ—Ä–∞–Ω—ã</span></label>
                        <label style="display: flex; align-items: center;"><input type="checkbox" checked> <span style="margin-left: 5px;">–†–∞–∑–≤–ª–µ—á–µ–Ω–∏—è</span></label>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">–¢–∏–ø —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏</label>
                    <select class="form-input">
                        <option>–í—Å–µ</option>
                        <option>–¢–æ–ª—å–∫–æ —Ä–∞—Å—Ö–æ–¥—ã</option>
                        <option>–¢–æ–ª—å–∫–æ –¥–æ—Ö–æ–¥—ã</option>
                        <option>–ü–µ—Ä–µ–≤–æ–¥—ã</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">–°—á–µ—Ç</label>
                    <select class="form-input">
                        <option>–í—Å–µ —Å—á–µ—Ç–∞</option>
                        <option>–¢–∏–Ω—å–∫–æ—Ñ—Ñ Black</option>
                        <option>–°–±–µ—Ä–±–∞–Ω–∫</option>
                        <option>–ù–∞–ª–∏—á–Ω—ã–µ</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">–°—É–º–º–∞</label>
                    <div style="display: flex; gap: 10px;">
                        <input type="number" class="form-input" placeholder="–û—Ç" style="flex: 1;">
                        <input type="number" class="form-input" placeholder="–î–æ" style="flex: 1;">
                    </div>
                </div>
                <div class="form-buttons">
                    <button class="btn btn-secondary" onclick="closeModal()">–û—Ç–º–µ–Ω–∞</button>
                    <button class="btn btn-primary" onclick="saveAndClose('–§–∏–ª—å—Ç—Ä—ã –ø—Ä–∏–º–µ–Ω–µ–Ω—ã!')">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
                </div>
            `;
            
            modal.classList.add('open');
        }
        
        function exportTransactions() {
            const modal = document.getElementById('modal');
            const modalTitle = document.getElementById('modalTitle');
            const modalBody = document.getElementById('modalBody');
            
            modalTitle.textContent = 'üì§ –≠–∫—Å–ø–æ—Ä—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π';
            modalBody.innerHTML = `
                <div class="form-group">
                    <label class="form-label">–§–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞</label>
                    <select class="form-input">
                        <option>CSV (Excel)</option>
                        <option>PDF –æ—Ç—á–µ—Ç</option>
                        <option>Excel (XLSX)</option>
                        <option>JSON</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">–ü–µ—Ä–∏–æ–¥</label>
                    <select class="form-input">
                        <option>–¢–µ–∫—É—â–∏–π –º–µ—Å—è—Ü</option>
                        <option>–ü—Ä–æ—à–ª—ã–π –º–µ—Å—è—Ü</option>
                        <option>–ü–æ—Å–ª–µ–¥–Ω–∏–µ 3 –º–µ—Å—è—Ü–∞</option>
                        <option>–¢–µ–∫—É—â–∏–π –≥–æ–¥</option>
                        <option>–ü—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–π –ø–µ—Ä–∏–æ–¥</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">–í–∫–ª—é—á–∏—Ç—å</label>
                    <div style="display: flex; flex-direction: column; gap: 8px;">
                        <label style="display: flex; align-items: center;"><input type="checkbox" checked> <span style="margin-left: 5px;">–í—Å–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏</span></label>
                        <label style="display: flex; align-items: center;"><input type="checkbox" checked> <span style="margin-left: 5px;">–ö–∞—Ç–µ–≥–æ—Ä–∏–∏</span></label>
                        <label style="display: flex; align-items: center;"><input type="checkbox" checked> <span style="margin-left: 5px;">–¢–µ–≥–∏ –∏ –∑–∞–º–µ—Ç–∫–∏</span></label>
                        <label style="display: flex; align-items: center;"><input type="checkbox"> <span style="margin-left: 5px;">–ê–Ω–∞–ª–∏—Ç–∏–∫—É</span></label>
                    </div>
                </div>
                <div class="form-buttons">
                    <button class="btn btn-secondary" onclick="closeModal()">–û—Ç–º–µ–Ω–∞</button>
                    <button class="btn btn-primary" onclick="saveAndClose('–§–∞–π–ª –≥–æ—Ç–æ–≤–∏—Ç—Å—è –∫ –∑–∞–≥—Ä—É–∑–∫–µ...')">–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
                </div>
            `;
            
            modal.classList.add('open');
        }
        
        function toggleAmountVisibility() {
            alert('–°—É–º–º—ã —Å–∫—Ä—ã—Ç—ã –¥–ª—è –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏. –ù–∞–∂–º–∏—Ç–µ –µ—â–µ —Ä–∞–∑, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å.');
        }
        
        function showBudgetDetails(name) {
            const budget = budgets.find(b => b.name === name);
            if (!budget) return;
            
            const modal = document.getElementById('modal');
            const modalTitle = document.getElementById('modalTitle');
            const modalBody = document.getElementById('modalBody');
            
            modalTitle.textContent = `üìä –ë—é–¥–∂–µ—Ç: ${name}`;
            modalBody.innerHTML = `
                <div style="text-align: center; margin-bottom: 20px;">
                    <div style="font-size: 24px; font-weight: bold;">
                        ${budget.spent.toLocaleString()}‚ÇΩ / ${budget.limit.toLocaleString()}‚ÇΩ
                    </div>
                    <div style="font-size: 14px; color: #666;">
                        –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ ${Math.round((budget.spent/budget.limit)*100)}%
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">–ù–æ–≤—ã–π –ª–∏–º–∏—Ç</label>
                    <input type="number" class="form-input" value="${budget.limit}">
                </div>
                
                <div style="background: #f0f8ff; padding: 12px; border-radius: 6px; margin: 15px 0;">
                    <div style="font-size: 13px; font-weight: bold; margin-bottom: 8px;">üìà –ò—Å—Ç–æ—Ä–∏—è (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 6 –º–µ—Å—è—Ü–µ–≤)</div>
                    <div style="display: flex; justify-content: space-between; font-size: 12px;">
                        <div>–ú–∞—Ä—Ç: 14,200‚ÇΩ</div>
                        <div>–ê–ø—Ä–µ–ª—å: 13,800‚ÇΩ</div>
                        <div>–ú–∞–π: 15,100‚ÇΩ</div>
                    </div>
                    <div style="display: flex; justify-content: space-between; font-size: 12px; margin-top: 5px;">
                        <div>–ò—é–Ω—å: 12,900‚ÇΩ</div>
                        <div>–ò—é–ª—å: 14,500‚ÇΩ</div>
                        <div>–ê–≤–≥—É—Å—Ç: ${budget.spent.toLocaleString()}‚ÇΩ</div>
                    </div>
                </div>
                
                <div style="background: #fff3cd; padding: 10px; border-radius: 6px; margin: 15px 0; font-size: 13px;">
                    üí° <strong>AI —Å–æ–≤–µ—Ç:</strong> –í–∞—à–∏ —Ç—Ä–∞—Ç—ã –≤ —ç—Ç–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ä–∞—Å—Ç—É—Ç –Ω–∞ 8% –µ–∂–µ–º–µ—Å—è—á–Ω–æ. –†–µ–∫–æ–º–µ–Ω–¥—É—é —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ª–∏–º–∏—Ç ${Math.round(budget.limit * 1.1).toLocaleString()}‚ÇΩ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π –º–µ—Å—è—Ü.
                </div>
                
                <div class="form-buttons">
                    <button class="btn btn-secondary" onclick="closeModal()">–ó–∞–∫—Ä—ã—Ç—å</button>
                    <button class="btn btn-primary" onclick="saveAndClose('–ë—é–¥–∂–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω!')">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                </div>
            `;
            
            modal.classList.add('open');
        }
        
        function addToGoal(goalName) {
            const modal = document.getElementById('modal');
            const modalTitle = document.getElementById('modalTitle');
            const modalBody = document.getElementById('modalBody');
            
            modalTitle.textContent = `üí∞ –ü–æ–ø–æ–ª–Ω–∏—Ç—å: ${goalName}`;
            modalBody.innerHTML = `
                <div class="form-group">
                    <label class="form-label">–°—É–º–º–∞ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è</label>
                    <input type="number" class="form-input" placeholder="0 ‚ÇΩ" autofocus>
                </div>
                <div class="form-group">
                    <label class="form-label">–ò—Å—Ç–æ—á–Ω–∏–∫</label>
                    <select class="form-input">
                        <option>–û—Å–Ω–æ–≤–Ω–æ–π —Å—á–µ—Ç</option>
                        <option>–°–±–µ—Ä–µ–∂–µ–Ω–∏—è</option>
                        <option>–ë–æ–Ω—É—Å/–ü–æ–¥–∞—Ä–æ–∫</option>
                        <option>–í–æ–∑–≤—Ä–∞—Ç —Å—Ä–µ–¥—Å—Ç–≤</option>
                    </select>
                </div>
                <div style="background: #f0f8ff; padding: 10px; border-radius: 6px; margin: 15px 0; font-size: 13px;">
                    üí° –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω–∞—è —Å—É–º–º–∞ –¥–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è —Ü–µ–ª–∏ –≤ —Å—Ä–æ–∫: <strong>12,500‚ÇΩ/–º–µ—Å</strong>
                </div>
                <div class="form-buttons">
                    <button class="btn btn-secondary" onclick="closeModal()">–û—Ç–º–µ–Ω–∞</button>
                    <button class="btn btn-primary" onclick="saveAndClose('–¶–µ–ª—å –ø–æ–ø–æ–ª–Ω–µ–Ω–∞! üéØ')">–ü–æ–ø–æ–ª–Ω–∏—Ç—å</button>
                </div>
            `;
            
            modal.classList.add('open');
        }
        
        function loadPlannerSubTab(subTab) {
            document.querySelectorAll('.sub-tab').forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');
            
            const content = document.getElementById('plannerSubContent');
            switch(subTab) {
                case 'tasks':
                    content.innerHTML = getTasksContent();
                    break;
                case 'focus':
                    content.innerHTML = getFocusContent();
                    break;
                case 'habits':
                    content.innerHTML = getHabitsContent();
                    break;
                case 'projects':
                    content.innerHTML = `
                        <div style="background: white; padding: 15px; border-radius: 8px; margin-bottom: 15px;">
                            <h4 style="margin-bottom: 10px;">üìÅ –†–µ–¥–∏–∑–∞–π–Ω —Å–∞–π—Ç–∞</h4>
                            <div style="margin-bottom: 8px; font-size: 13px; color: #666;">–ü—Ä–æ–≥—Ä–µ—Å—Å: 65%</div>
                            <div class="budget-progress">
                                <div class="budget-fill" style="width: 65%; background: #4a90e2;"></div>
                            </div>
                            <div style="margin-top: 10px; font-size: 13px; color: #666;">
                                üìÖ –î–µ–¥–ª–∞–π–Ω: 15 —Å–µ–Ω—Ç—è–±—Ä—è ¬∑ üë• 3 —É—á–∞—Å—Ç–Ω–∏–∫–∞ ¬∑ ‚úÖ 8/12 –∑–∞–¥–∞—á
                            </div>
                        </div>
                        
                        <div style="background: white; padding: 15px; border-radius: 8px;">
                            <h4 style="margin-bottom: 10px;">üìÅ –ò–∑—É—á–µ–Ω–∏–µ React Native</h4>
                            <div style="margin-bottom: 8px; font-size: 13px; color: #666;">–ü—Ä–æ–≥—Ä–µ—Å—Å: 30%</div>
                            <div class="budget-progress">
                                <div class="budget-fill" style="width: 30%; background: #4a90e2;"></div>
                            </div>
                            <div style="margin-top: 10px; font-size: 13px; color: #666;">
                                üìÖ –î–µ–¥–ª–∞–π–Ω: 30 —Å–µ–Ω—Ç—è–±—Ä—è ¬∑ üë§ –õ–∏—á–Ω—ã–π ¬∑ ‚úÖ 3/10 –∑–∞–¥–∞—á
                            </div>
                        </div>
                    `;
                    break;
            }
        }
        
        // FAB functions
        function toggleFab() {
            const fabMenu = document.getElementById('fabMenu');
            fabMenu.classList.toggle('open');
        }
        
        // Modal functions
        function showModal(type) {
            const modal = document.getElementById('modal');
            const modalTitle = document.getElementById('modalTitle');
            const modalBody = document.getElementById('modalBody');
            
            toggleFab(); // Close FAB menu
            
            switch(type) {
                case 'task':
                    modalTitle.textContent = 'üìù –ù–æ–≤–∞—è –∑–∞–¥–∞—á–∞';
                    modalBody.innerHTML = `
                        <div class="form-group">
                            <label class="form-label">–ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏</label>
                            <input type="text" class="form-input" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –æ—Ç—á–µ—Ç">
                        </div>
                        <div class="form-group">
                            <label class="form-label">–ü—Ä–æ–µ–∫—Ç</label>
                            <select class="form-input">
                                <option>–†–∞–±–æ—Ç–∞</option>
                                <option>–õ–∏—á–Ω–æ–µ</option>
                                <option>–û–±—É—á–µ–Ω–∏–µ</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç</label>
                            <select class="form-input">
                                <option>üî¥ –í—ã—Å–æ–∫–∏–π</option>
                                <option>üü° –°—Ä–µ–¥–Ω–∏–π</option>
                                <option>üîµ –ù–∏–∑–∫–∏–π</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">–í—Ä–µ–º—è</label>
                            <input type="time" class="form-input">
                        </div>
                        <div class="form-buttons">
                            <button class="btn btn-secondary" onclick="closeModal()">–û—Ç–º–µ–Ω–∞</button>
                            <button class="btn btn-primary" onclick="saveAndClose('–ó–∞–¥–∞—á–∞ —Å–æ–∑–¥–∞–Ω–∞!')">–°–æ–∑–¥–∞—Ç—å</button>
                        </div>
                    `;
                    break;
                    
                case 'expense':
                    modalTitle.textContent = 'üí∏ –ë—ã—Å—Ç—Ä—ã–π —Ä–∞—Å—Ö–æ–¥';
                    modalBody.innerHTML = `
                        <div class="form-group">
                            <label class="form-label">–°—É–º–º–∞</label>
                            <input type="number" class="form-input" placeholder="0 ‚ÇΩ" autofocus>
                        </div>
                        <div class="form-group">
                            <label class="form-label">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</label>
                            <select class="form-input">
                                <option>üõí –ü—Ä–æ–¥—É–∫—Ç—ã</option>
                                <option>üöó –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç</option>
                                <option>üçî –†–µ—Å—Ç–æ—Ä–∞–Ω—ã</option>
                                <option>üéÆ –†–∞–∑–≤–ª–µ—á–µ–Ω–∏—è</option>
                                <option>üè† –î–æ–º</option>
                                <option>üíä –ó–¥–æ—Ä–æ–≤—å–µ</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">–û–ø–∏—Å–∞–Ω–∏–µ</label>
                            <input type="text" class="form-input" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –û–±–µ–¥ –≤ –∫–∞—Ñ–µ">
                        </div>
                        <div class="form-buttons">
                            <button class="btn btn-secondary" onclick="closeModal()">–û—Ç–º–µ–Ω–∞</button>
                            <button class="btn btn-primary" onclick="saveAndClose('–†–∞—Å—Ö–æ–¥ –¥–æ–±–∞–≤–ª–µ–Ω!')">–î–æ–±–∞–≤–∏—Ç—å</button>
                        </div>
                    `;
                    break;
                    
                case 'income':
                    modalTitle.textContent = 'üíµ –ë—ã—Å—Ç—Ä—ã–π –¥–æ—Ö–æ–¥';
                    modalBody.innerHTML = `
                        <div class="form-group">
                            <label class="form-label">–°—É–º–º–∞</label>
                            <input type="number" class="form-input" placeholder="0 ‚ÇΩ" autofocus>
                        </div>
                        <div class="form-group">
                            <label class="form-label">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</label>
                            <select class="form-input">
                                <option>üíº –ó–∞—Ä–ø–ª–∞—Ç–∞</option>
                                <option>üí∞ –ë–æ–Ω—É—Å</option>
                                <option>üéÅ –ü–æ–¥–∞—Ä–æ–∫</option>
                                <option>üí∏ –í–æ–∑–≤—Ä–∞—Ç</option>
                                <option>üìà –ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏</option>
                                <option>üè™ –ü–æ–¥—Ä–∞–±–æ—Ç–∫–∞</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">–û–ø–∏—Å–∞–Ω–∏–µ</label>
                            <input type="text" class="form-input" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ó–∞—Ä–ø–ª–∞—Ç–∞ –∑–∞ –∞–≤–≥—É—Å—Ç">
                        </div>
                        <div class="form-buttons">
                            <button class="btn btn-secondary" onclick="closeModal()">–û—Ç–º–µ–Ω–∞</button>
                            <button class="btn btn-primary" onclick="saveAndClose('–î–æ—Ö–æ–¥ –¥–æ–±–∞–≤–ª–µ–Ω!')">–î–æ–±–∞–≤–∏—Ç—å</button>
                        </div>
                    `;
                    break;
                    
                case 'transfer':
                    modalTitle.textContent = '‚ÜîÔ∏è –ü–µ—Ä–µ–≤–æ–¥ –º–µ–∂–¥—É —Å—á–µ—Ç–∞–º–∏';
                    modalBody.innerHTML = `
                        <div class="form-group">
                            <label class="form-label">–°—É–º–º–∞</label>
                            <input type="number" class="form-input" placeholder="0 ‚ÇΩ" autofocus>
                        </div>
                        <div class="form-group">
                            <label class="form-label">–û—Ç–∫—É–¥–∞</label>
                            <select class="form-input">
                                <option>–¢–∏–Ω—å–∫–æ—Ñ—Ñ Black</option>
                                <option>–°–±–µ—Ä–±–∞–Ω–∫</option>
                                <option>–ù–∞–ª–∏—á–Ω—ã–µ</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">–ö—É–¥–∞</label>
                            <select class="form-input">
                                <option>–°–±–µ—Ä–±–∞–Ω–∫</option>
                                <option>–¢–∏–Ω—å–∫–æ—Ñ—Ñ Black</option>
                                <option>–ù–∞–ª–∏—á–Ω—ã–µ</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">–ö–æ–º–∏—Å—Å–∏—è (–µ—Å–ª–∏ –µ—Å—Ç—å)</label>
                            <input type="number" class="form-input" placeholder="0 ‚ÇΩ">
                        </div>
                        <div style="background: #f0f8ff; padding: 10px; border-radius: 6px; margin: 15px 0; font-size: 13px;">
                            üí° <strong>–ü–æ–¥—Å–∫–∞–∑–∫–∞:</strong> –ü—Ä–∏ –ø–µ—Ä–µ–≤–æ–¥–µ –º–µ–∂–¥—É –≤–∞–ª—é—Ç–∞–º–∏ –±—É–¥–µ—Ç –ø—Ä–∏–º–µ–Ω–µ–Ω —Ç–µ–∫—É—â–∏–π –∫—É—Ä—Å –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏
                        </div>
                        <div class="form-buttons">
                            <button class="btn btn-secondary" onclick="closeModal()">–û—Ç–º–µ–Ω–∞</button>
                            <button class="btn btn-primary" onclick="saveAndClose('–ü–µ—Ä–µ–≤–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω!')">–ü–µ—Ä–µ–≤–µ—Å—Ç–∏</button>
                        </div>
                    `;
                    break;
                    
                case 'voice':
                    modalTitle.textContent = 'üé§ –ì–æ–ª–æ—Å–æ–≤–æ–π –≤–≤–æ–¥';
                    modalBody.innerHTML = `
                        <div style="text-align: center; padding: 20px;">
                            <div style="font-size: 48px; margin-bottom: 20px;">üé§</div>
                            <div style="margin-bottom: 20px; color: #666;">
                                –ù–∞–∂–º–∏—Ç–µ –∏ –≥–æ–≤–æ—Ä–∏—Ç–µ. AI —Ä–∞—Å–ø–æ–∑–Ω–∞–µ—Ç –∫–æ–º–∞–Ω–¥—É –∏ —Å–æ–∑–¥–∞—Å—Ç –∑–∞–¥–∞—á—É –∏–ª–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é.
                            </div>
                            <button class="btn btn-primary" style="width: 120px;" onclick="alert('–ó–∞–ø–∏—Å—å –Ω–∞—á–∞–ª–∞—Å—å...'); closeModal()">
                                –ù–∞—á–∞—Ç—å –∑–∞–ø–∏—Å—å
                            </button>
                        </div>
                        <div class="form-buttons">
                            <button class="btn btn-secondary" onclick="closeModal()">–ó–∞–∫—Ä—ã—Ç—å</button>
                        </div>
                    `;
                    break;
            }
            
            modal.classList.add('open');
        }
        
        function closeModal() {
            document.getElementById('modal').classList.remove('open');
        }
        
        function saveAndClose(message) {
            alert(message);
            closeModal();
        }
        
        // Focus timer functions
        function startFocus() {
            toggleFab();
            currentTab = 'planner';
            loadContent('planner');
            loadPlannerSubTab('focus');
            toggleFocus();
        }
        
        function toggleFocus() {
            if (isFocusRunning) {
                clearInterval(focusTimer);
                isFocusRunning = false;
            } else {
                isFocusRunning = true;
                focusTimer = setInterval(updateTimer, 1000);
            }
            
            // Update button text
            const focusContent = document.getElementById('plannerSubContent');
            if (focusContent && focusContent.innerHTML.includes('focus-timer')) {
                loadPlannerSubTab('focus');
            }
        }
        
        function updateTimer() {
            if (focusSeconds > 0) {
                focusSeconds--;
                const minutes = Math.floor(focusSeconds / 60);
                const seconds = focusSeconds % 60;
                const display = document.getElementById('timerDisplay');
                if (display) {
                    display.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                }
            } else {
                clearInterval(focusTimer);
                isFocusRunning = false;
                alert('üéâ –§–æ–∫—É—Å-—Å–µ—Å—Å–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞! –û—Ü–µ–Ω–∏—Ç–µ —Å–≤–æ—é –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—å.');
                focusSeconds = 1500; // Reset
            }
        }
        
        function resetFocus() {
            clearInterval(focusTimer);
            isFocusRunning = false;
            focusSeconds = 1500;
            const display = document.getElementById('timerDisplay');
            if (display) {
                display.textContent = '25:00';
            }
        }
        
        // Toggle functions
        function toggleTask(id) {
            const task = tasks.find(t => t.id === id);
            if (task) {
                task.done = !task.done;
                if (currentTab === 'home') {
                    loadContent('home');
                } else if (currentTab === 'planner') {
                    loadPlannerSubTab('tasks');
                }
            }
        }
        
        function toggleHabit(id) {
            const habit = habits.find(h => h.id === id);
            if (habit) {
                habit.done = !habit.done;
                if (!habit.done && habit.streak > 0) {
                    if (confirm('–≠—Ç–æ –ø—Ä–µ—Ä–≤–µ—Ç –≤–∞—à—É —Å–µ—Ä–∏—é –≤ ' + habit.streak + ' –¥–Ω–µ–π. –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å?')) {
                        habit.streak = 0;
                    } else {
                        habit.done = true;
                        return;
                    }
                } else if (habit.done) {
                    habit.streak++;
                }
                loadPlannerSubTab('habits');
            }
        }
        
        function hideInsight(id) {
            const index = insights.findIndex(i => i.id === id);
            if (index > -1) {
                insights.splice(index, 1);
                loadContent('insights');
            }
        }
        
        // User profile functions
        function showUserProfile() {
            const modal = document.getElementById('modal');
            const modalTitle = document.getElementById('modalTitle');
            const modalBody = document.getElementById('modalBody');
            
            modalTitle.textContent = 'üë§ –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è';
            modalBody.innerHTML = `
                <div style="text-align: center; margin-bottom: 20px;">
                    <div style="width: 80px; height: 80px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 40px; margin: 0 auto 10px;">
                        üë§
                    </div>
                    <button class="btn btn-secondary" style="font-size: 12px; padding: 5px 10px;">–ò–∑–º–µ–Ω–∏—Ç—å —Ñ–æ—Ç–æ</button>
                </div>
                
                <div class="form-group">
                    <label class="form-label">–ò–º—è</label>
                    <input type="text" class="form-input" value="–ê–ª–µ–∫—Å–∞–Ω–¥—Ä">
                </div>
                <div class="form-group">
                    <label class="form-label">–§–∞–º–∏–ª–∏—è</label>
                    <input type="text" class="form-input" value="–ò–≤–∞–Ω–æ–≤">
                </div>
                <div class="form-group">
                    <label class="form-label">Email</label>
                    <input type="email" class="form-input" value="alex.ivanov@email.com" readonly style="background: #f5f5f5;">
                </div>
                <div class="form-group">
                    <label class="form-label">–¢–µ–ª–µ—Ñ–æ–Ω</label>
                    <input type="tel" class="form-input" value="+7 (999) 123-45-67">
                </div>
                <div class="form-group">
                    <label class="form-label">–ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å</label>
                    <select class="form-input">
                        <option>–ú–æ—Å–∫–≤–∞ (UTC+3)</option>
                        <option>–ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥ (UTC+5)</option>
                        <option>–ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫ (UTC+7)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">–Ø–∑—ã–∫</label>
                    <select class="form-input">
                        <option>–†—É—Å—Å–∫–∏–π</option>
                        <option>English</option>
                    </select>
                </div>
                
                <div style="background: #f0f8ff; padding: 10px; border-radius: 6px; margin: 15px 0; font-size: 13px;">
                    <div style="margin-bottom: 5px;">üìä <strong>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∞–∫–∫–∞—É–Ω—Ç–∞:</strong></div>
                    <div>‚Ä¢ –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω: 5 –∞–ø—Ä–µ–ª—è 2025</div>
                    <div>‚Ä¢ –í—Å–µ–≥–æ –∑–∞–¥–∞—á: 1,245</div>
                    <div>‚Ä¢ –§–æ–∫—É—Å-—Å–µ—Å—Å–∏–π: 342</div>
                    <div>‚Ä¢ –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–π: 2,156</div>
                </div>
                
                <div class="form-buttons">
                    <button class="btn btn-secondary" onclick="closeModal()">–ó–∞–∫—Ä—ã—Ç—å</button>
                    <button class="btn btn-primary" onclick="saveAndClose('–ü—Ä–æ—Ñ–∏–ª—å –æ–±–Ω–æ–≤–ª–µ–Ω!')">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                </div>
            `;
            
            modal.classList.add('open');
        }
        
        function showDevicesList() {
            const modal = document.getElementById('modal');
            const modalTitle = document.getElementById('modalTitle');
            const modalBody = document.getElementById('modalBody');
            
            modalTitle.textContent = 'üì± –ê–∫—Ç–∏–≤–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞';
            modalBody.innerHTML = `
                <div style="margin-bottom: 15px; padding: 12px; background: #f0fff0; border-radius: 8px; border-left: 3px solid #51cf66;">
                    <div style="font-weight: bold; margin-bottom: 5px;">
                        üíª MacBook Pro
                    </div>
                    <div style="font-size: 13px; color: #666;">
                        <div>Safari ¬∑ macOS Sonoma</div>
                        <div>–ü–æ—Å–ª–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å: —Å–µ–π—á–∞—Å</div>
                        <div style="color: #51cf66; margin-top: 3px;">‚úì –¢–µ–∫—É—â–µ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ</div>
                    </div>
                </div>
                
                <div style="margin-bottom: 15px; padding: 12px; background: #f5f5f5; border-radius: 8px; border-left: 3px solid #999;">
                    <div style="font-weight: bold; margin-bottom: 5px;">
                        üì± iPhone 15 Pro
                    </div>
                    <div style="font-size: 13px; color: #666;">
                        <div>LEORA App ¬∑ iOS 18.0</div>
                        <div>–ü–æ—Å–ª–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å: 2 —á–∞—Å–∞ –Ω–∞–∑–∞–¥</div>
                        <div>–ú–æ—Å–∫–≤–∞, –†–æ—Å—Å–∏—è</div>
                    </div>
                    <button class="btn btn-secondary" style="margin-top: 8px; font-size: 12px; padding: 4px 8px;" onclick="alert('–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –æ—Ç–∫–ª—é—á–µ–Ω–æ')">
                        –û—Ç–∫–ª—é—á–∏—Ç—å
                    </button>
                </div>
                
                <div style="margin-bottom: 15px; padding: 12px; background: #f5f5f5; border-radius: 8px; border-left: 3px solid #999;">
                    <div style="font-weight: bold; margin-bottom: 5px;">
                        üì± iPad Air
                    </div>
                    <div style="font-size: 13px; color: #666;">
                        <div>LEORA App ¬∑ iPadOS 18.0</div>
                        <div>–ü–æ—Å–ª–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å: –≤—á–µ—Ä–∞</div>
                        <div>–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥, –†–æ—Å—Å–∏—è</div>
                    </div>
                    <button class="btn btn-secondary" style="margin-top: 8px; font-size: 12px; padding: 4px 8px;" onclick="alert('–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –æ—Ç–∫–ª—é—á–µ–Ω–æ')">
                        –û—Ç–∫–ª—é—á–∏—Ç—å
                    </button>
                </div>
                
                <div style="background: #fff3cd; padding: 10px; border-radius: 6px; margin: 15px 0; font-size: 13px;">
                    ‚ö†Ô∏è <strong>–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:</strong> –ï—Å–ª–∏ –≤—ã –≤–∏–¥–∏—Ç–µ –Ω–µ–∑–Ω–∞–∫–æ–º–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ, –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç–µ –µ–≥–æ –∏ —Å–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª—å.
                </div>
                
                <div class="form-buttons">
                    <button class="btn btn-secondary" onclick="closeModal()">–ó–∞–∫—Ä—ã—Ç—å</button>
                    <button class="btn btn-primary" onclick="alert('–í—ã—Ö–æ–¥ –∏–∑ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤, –∫—Ä–æ–º–µ —Ç–µ–∫—É—â–µ–≥–æ')">–í—ã–π—Ç–∏ –∏–∑ –≤—Å–µ—Ö</button>
                </div>
            `;
            
            modal.classList.add('open');
        }
    </script>
</body>
</html>
